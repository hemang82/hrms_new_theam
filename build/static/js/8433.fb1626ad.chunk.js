"use strict";(self.webpackChunkHRMS_Admin_Panel=self.webpackChunkHRMS_Admin_Panel||[]).push([[8433],{38433:(e,l,i)=>{i.r(l),i.d(l,{default:()=>w});var s=i(89379),d=i(9950),a=i(28429),n=i(9449),o=i(82391),r=i(52610),t=i(79739),c=i(32003),m=i(70591),u=i(82543),v=i(82569),h=i(59091),x=i(61977),j=i(60984),b=i(82137),p=i(46004),N=i(4159),g=i.n(N),E=i(90607),f=i(35254),y=i.n(f),A=(i(17687),i(44414));function w(){var e,l,i,N;const f=(0,a.Zp)(),w=(0,v.wA)(),S=(0,a.zy)();var R=null===S||void 0===S?void 0:S.state;const{customerList:{data:I}}=(0,v.d4)(e=>e.masterslice),[P,C]=(0,d.useState)(!1),[T,D]=(0,d.useState)(null),{register:O,handleSubmit:_,setValue:M,clearErrors:k,reset:Y,watch:F,control:L,trigger:z,formState:{errors:H}}=(0,n.mN)({defaultValues:{breaks:[{start:null,end:null}]}}),{fields:U,append:q,remove:V}=(0,n.jz)({control:L,name:"breaks"});(0,d.useEffect)(()=>{var e;const l={emp_leave_company:null===(e=u.wz[0])||void 0===e?void 0:e.key};0===(null===I||void 0===I?void 0:I.length)&&w((0,h.hI)(l))},[]),console.log("ProjectData",R),(0,d.useEffect)(()=>{if(R&&(null===I||void 0===I?void 0:I.length)>0){var e;w((0,h.iC)(!0));const l=null!==R&&void 0!==R&&R.team?null===R||void 0===R||null===(e=R.team)||void 0===e?void 0:e.split(",").map(Number):[];null===I||void 0===I||I.filter(e=>null===l||void 0===l?void 0:l.includes(null===e||void 0===e?void 0:e.id));M(u.ic.EMPLOYEE,l||[]),M(u.ic.NAME,(null===R||void 0===R?void 0:R.name)||null),M(u.ic.DESCRIPTION,(null===R||void 0===R?void 0:R.description)||null),M(u.ic.PRIORITY,(null===R||void 0===R?void 0:R.priority)||null),M(u.ic.DATE,null!==R&&void 0!==R&&R.deadline?g()(null===R||void 0===R?void 0:R.deadline,"YYYY-MM-DD"):null),w((0,h.iC)(!1))}},[R,I]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(x.default,{isActive:P,message:"Please Wait"}),(0,A.jsxs)("div",{className:"container-fluid mw-100",children:[(0,A.jsx)(t.A,{title:R?"Edit Project":"Add Project",header:"Project List",subHeaderOnlyView:R?"Edit Project":"Add Project"}),(0,A.jsx)("div",{className:"row",children:(0,A.jsx)("div",{className:"col-12 justify-content-center",children:(0,A.jsx)("div",{className:"row justify-content-center ",children:(0,A.jsx)("form",{onSubmit:_(async e=>{try{var l,i;w((0,h.iC)(!0));let d={name:e[u.ic.NAME],description:e[u.ic.DESCRIPTION],deadline:(0,m.qr)(e[u.ic.DATE],null===u.ow||void 0===u.ow?void 0:u.ow.DATE_DASH_TIME_FORMAT),team:1==(null===(l=e[u.ic.EMPLOYEE])||void 0===l?void 0:l.length)?null===(i=e[u.ic.EMPLOYEE][0])||void 0===i?void 0:i.toString():e[u.ic.EMPLOYEE],priority:e[u.ic.PRIORITY]};var s;if(R)d.project_id=null===R||void 0===R||null===(s=R.id)||void 0===s?void 0:s.toString(),(0,r.e3)(d).then(e=>{(null===e||void 0===e?void 0:e.code)==c.NC.SUCCESS?((0,o.k1)(null===e||void 0===e?void 0:e.message),w((0,h.EF)({})),f(null===E.R||void 0===E.R?void 0:E.R.LIST_PROJECT)):(0,o.uU)(e.message)});else(0,r.By)(d).then(e=>{(null===e||void 0===e?void 0:e.code)==c.NC.SUCCESS?((0,o.k1)(null===e||void 0===e?void 0:e.message),f(null===E.R||void 0===E.R?void 0:E.R.LIST_PROJECT),w((0,h.EF)({})),w((0,h.iC)(!1))):((0,o.uU)(e.message),w((0,h.iC)(!1)))})}catch(d){(0,o.uU)("Somthing went wrong"),w((0,h.iC)(!1))}}),children:(0,A.jsx)("div",{className:"card",children:(0,A.jsx)("div",{className:"card-body",children:(0,A.jsxs)("div",{className:"row col-12 col-md-12 ",children:[(0,A.jsxs)("div",{className:"col-md-6",children:[(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("label",{htmlFor:"lastname",className:"form-label fw-semibold",children:["Project Name ",(0,A.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,A.jsx)("div",{className:"input-group border rounded-1",children:(0,A.jsx)("input",(0,s.A)({type:"text",className:"form-control ps-2",placeholder:"Enter project name",autoComplete:"nope"},O(u.ic.NAME,(0,m.DX)(u.ic.NAME,"Enter project name"))))}),(0,A.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(e=H[u.ic.NAME])||void 0===e?void 0:e.message})]}),(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("label",{htmlFor:"leave_reason",className:"form-label fw-semibold",children:["Project Description ",(0,A.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,A.jsx)("div",{className:" border rounded-1",children:(0,A.jsx)(n.xI,{name:u.ic.DESCRIPTION,control:L,rules:{required:"Enter project description"},render:e=>{let{field:l}=e;return(0,A.jsx)(y(),(0,s.A)((0,s.A)({},l),{},{theme:"snow",placeholder:"Enter project description",className:"custom-quill w-100",style:{minHeight:"200px"}}))}})}),(0,A.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(l=H[u.ic.DESCRIPTION])||void 0===l?void 0:l.message})]})]}),(0,A.jsxs)("div",{className:"col-md-6",children:[(0,A.jsxs)("div",{className:"2 d-flex gap-2",children:[(0,A.jsxs)("div",{className:"col-12 col-md-6",children:[(0,A.jsxs)("label",{htmlFor:"dob1",className:"form-label fw-semibold",children:["Deadline Date ",(0,A.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,A.jsx)(n.xI,{name:u.ic.DATE,control:L,rules:{required:"Select Deadline Date"},render:e=>{let{field:l}=e;return(0,A.jsx)(j.A,{id:u.ic.DATE,className:"form-control custom-datepicker w-100",format:null===u.ow||void 0===u.ow?void 0:u.ow.DATE_FORMAT,value:l.value?g()(l.value):null,onChange:e=>{console.log("date",e),l.onChange(e?e.toISOString():null)},allowClear:!1,picker:"date"})}}),H[u.ic.DATE]&&(0,A.jsx)("small",{className:"text-danger",children:H[u.ic.DATE].message})]}),(0,A.jsx)("div",{className:"col-12 col-md-6",children:(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("label",{htmlFor:"priority",className:"form-label fw-semibold",children:["Priority",(0,A.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,A.jsx)("div",{className:"input-group",children:(0,A.jsx)(n.xI,{name:u.ic.PRIORITY,control:L,rules:{required:"Select priority"},render:e=>{let{field:l}=e;return(0,A.jsx)(b.A,{style:{width:"100%",height:"40px"},placeholder:"Select priority",value:l.value||void 0,onChange:e=>{l.onChange(e),M(u.ic.PRIORITY,e)},options:(null===u.Rz||void 0===u.Rz?void 0:u.Rz.map(e=>({label:e.value,value:e.key})))||[],optionRender:e=>(0,A.jsx)(p.A,{children:null===e||void 0===e?void 0:e.label}),className:" border rounded-1"})}})}),(0,A.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(i=H[u.ic.PRIORITY])||void 0===i?void 0:i.message})]})})]}),(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("label",{htmlFor:"gender1",className:"form-label fw-semibold",children:["Select Employee",(0,A.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,A.jsx)(n.xI,{name:u.ic.EMPLOYEE,control:L,rules:{required:"Select at least one employee"},render:e=>{let{field:l}=e;return(0,A.jsx)(b.A,{mode:"multiple",style:{width:"100%",height:"40px"},placeholder:"Select employee",value:l.value||[],onChange:e=>{l.onChange(e),M(u.ic.EMPLOYEE,e)},options:(null===I||void 0===I?void 0:I.map(e=>({label:e.name,value:e.id})))||[],optionRender:e=>(0,A.jsx)(p.A,{children:null===e||void 0===e?void 0:e.label}),className:"border rounded-1"})}}),(0,A.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(N=H[u.ic.EMPLOYEE])||void 0===N?void 0:N.message})]})]}),(0,A.jsx)("div",{className:"modal-footer justify-content-center mb-3",children:(0,A.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})})})})})})})]})]})}},79739:(e,l,i)=>{i.d(l,{A:()=>t});i(9950);var s=i(28429),d=i(42074),a=i(32003),n=i(82569),o=i(59091),r=(i(90607),i(44414));function t(e){let{title:l,header:i,subHeader:t,subHeaderOnlyView:c}=e;const{slidebarToggle:m}=(0,n.d4)(e=>e.masterslice),u=(0,s.zy)(),v=(0,n.wA)(),h=((0,s.Zp)(),null===u||void 0===u?void 0:u.pathname);let x=null===h||void 0===h?void 0:h.split("/");var j=JSON.parse(localStorage.getItem(a.Ay.AUTH_KEY));return console.log("userDetailsuserDetails",j),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"card bg-light-info shadow-none border-0 position-relative overflow-hidden make-header",children:(0,r.jsx)("div",{className:"card-body px-4 py-3",children:(0,r.jsxs)("div",{className:"row align-items-center",children:[(0,r.jsxs)("div",{className:"col-12 col-md-9 d-flex align-items-center gap-3 mb-3 mb-md-0",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-light d-flex align-items-center justify-content-center p-2 shadow-sm rounded-circle",onClick:()=>{v((0,o.ST)(!m)),(()=>{const e=document.querySelector("body");if(e&&e.setAttribute("data-sidebartype",m?"mini-sidebar":"full"),window.innerWidth<=992){const e=document.getElementById("left_side_menu_id");e&&(e.style.display=m?"none":"block")}})()},children:(0,r.jsx)("i",{className:"ti ti-menu-2 fs-5 text-custom-theam"})}),(0,r.jsx)("nav",{"aria-label":"breadcrumb",className:"ms-2",children:(0,r.jsxs)("ol",{className:"breadcrumb mb-0",children:[(0,r.jsx)("li",{className:"breadcrumb-item",children:(0,r.jsx)(d.N_,{to:"/dashboard",className:"text-decoration-none",children:"Dashboard"})}),(0,r.jsx)("li",{className:"breadcrumb-item",children:(0,r.jsx)(d.N_,{to:"/".concat(null===x||void 0===x?void 0:x[1]),className:"text-decoration-none",children:i})}),t&&(0,r.jsx)("li",{className:"breadcrumb-item",children:(0,r.jsx)(d.N_,{to:h,className:"text-decoration-none",children:t})}),c&&(0,r.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:c})]})})]}),(0,r.jsxs)("div",{className:"col-12 col-md-3 d-flex justify-content-md-end justify-content-center ",children:[(0,r.jsx)("img",{src:(null===j||void 0===j?void 0:j.profile_image)||(null===a.Ay||void 0===a.Ay?void 0:a.Ay.DEFAULT_IMAGE),alt:"User Avatar",className:"rounded-circle me-2 d-none d-sm-block",style:{width:"40px",height:"40px",objectFit:"cover"}}),(0,r.jsxs)("div",{className:"d-none d-sm-block text-end",children:[(null===j||void 0===j?void 0:j.email)&&(0,r.jsx)("div",{className:"fw-semibold mb-0 ",style:{fontSize:"0.9rem"},children:null===j||void 0===j?void 0:j.email}),(null===j||void 0===j?void 0:j.role)&&(0,r.jsx)("div",{className:"fw-semibold mb-0 text-capitalize text-custom-theam",style:{fontSize:"0.9rem"},children:1==(null===j||void 0===j?void 0:j.role)?"Admin":"Sub Admin"})]})]})]})})})})}}}]);