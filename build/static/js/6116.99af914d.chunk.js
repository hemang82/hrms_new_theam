"use strict";(self.webpackChunkHRMS_Admin_Panel=self.webpackChunkHRMS_Admin_Panel||[]).push([[6116],{66116:(e,a,l)=>{l.r(a),l.d(a,{default:()=>y});var s=l(89379),i=l(9950),d=l(82569),t=l(28429),o=l(42074),n=(l(20404),l(12815),l(3302),l(19594),l(13658),l(79739)),r=l(52610),c=l(82391),m=l(42380),u=l(2401),h=(l(73907),l(59091)),x=l(32003),v=l(45397),b=l(70591),p=l(23172),j=l(19030),N=(l(75061),l(82543)),w=l(9449),g=l(60984),f=l(4159),T=l.n(f),A=l(35254),k=l.n(A),_=(l(17687),l(44414));function y(){var e,a;(0,t.Zp)();const l=(0,d.wA)(),{register:f,handleSubmit:A,setValue:y,clearErrors:D,reset:E,watch:S,trigger:C,control:M,formState:{errors:F}}=(0,w.mN)({defaultValues:{[N.ic.DATE]:T()().format(null===N.ow||void 0===N.ow?void 0:N.ow.DATE_FORMAT)}}),{dailyTaskList:{data:R}}=(0,d.d4)(e=>e.masterslice),{customModel:I}=(0,d.d4)(e=>e.masterslice),[O,P]=(0,i.useState)(!1),[L,U]=(0,i.useState)(""),[W,H]=((0,v.A)(L,x.dA),(0,i.useState)({global:{value:""}})),[z,V]=(0,i.useState)("created_at"),[q,G]=(0,i.useState)(-1),[B,J]=(0,i.useState)(10),[K,X]=(0,i.useState)(1),[Z,Q]=(0,i.useState)(T()().startOf("month")),[Y,$]=(0,i.useState)(T()()),[ee,ae]=(0,i.useState)(N.wz[0]),[le,se]=(0,i.useState)(!1),[ie,de]=(0,i.useState)(!1),[te,oe]=(0,i.useState)({}),[ne,re]=(0,i.useState)(!1);(0,i.useRef)(!1);(0,i.useEffect)(()=>{0===(null===R||void 0===R?void 0:R.length)&&(async()=>{try{const e={start_date:Z?(0,b.NC)(Z,null===N.ow||void 0===N.ow?void 0:N.ow.DATE_DASH_TIME_FORMAT):null,end_date:Y?(0,b.NC)(Y,null===N.ow||void 0===N.ow?void 0:N.ow.DATE_DASH_TIME_FORMAT):null};await l((0,h.DS)(e))}finally{}})()},[]);const ce=()=>{E(),se(!1),re(!1)};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"container-fluid mw-100",children:[(0,_.jsx)(n.A,{title:"Daily Work Update List",header:"Daily Work Update List"}),(0,_.jsxs)("div",{className:"widget-content searchable-container list",children:[(0,_.jsx)("div",{className:"card card-body mb-2 p-3",children:(0,_.jsxs)("div",{className:"row g-2",children:[(0,_.jsx)("div",{className:"col-12 col-md-6 col-lg-3",children:(0,_.jsxs)("div",{className:"position-relative mt-4 w-100",children:[(0,_.jsx)("input",{type:"text",className:"form-control ps-5 ",id:"input-search",placeholder:"Search work update ...",value:L,onChange:e=>{const a=e.target.value;let l=(0,s.A)({},W);l.global&&(l.global.value=a),H(l),U(a)}}),(0,_.jsx)("i",{className:"ti ti-search position-absolute top-50 start-0 translate-middle-y fs-6 text-dark ms-3"})]})}),(0,_.jsx)("div",{className:"col-12 col-md-6 col-lg-1 mb-2 mb-md-0"}),(0,_.jsx)("div",{className:"col-12 col-md-6 col-lg-4"}),(0,_.jsxs)("div",{className:"col-12 col-md-6 col-lg-2",children:[(0,_.jsx)("label",{className:"d-block mb-1 fw-semibold",children:"Start Date"}),(0,_.jsx)(g.A,{className:"custom-datepicker w-100 p-2",format:null===N.ow||void 0===N.ow?void 0:N.ow.DATE_FORMAT,value:Z,onChange:e=>{Q(e),$(null)},disabledDate:b.tK})]}),(0,_.jsxs)("div",{className:"col-12 col-md-6 col-lg-2",children:[(0,_.jsx)("label",{className:"d-block mb-1 fw-semibold",children:"End Date"}),(0,_.jsx)(g.A,{className:"custom-datepicker w-100 p-2",format:null===N.ow||void 0===N.ow?void 0:N.ow.DATE_FORMAT,value:Y,onChange:e=>{$(e),X(1),(async e=>{try{const a={start_date:null!==e&&void 0!==e&&e.start_date?(0,b.Gv)(null===e||void 0===e?void 0:e.start_date,null===N.ow||void 0===N.ow?void 0:N.ow.DATE_DASH_TIME_FORMAT):null,end_date:null!==e&&void 0!==e&&e.end_date?(0,b.Gv)(null===e||void 0===e?void 0:e.end_date,null===N.ow||void 0===N.ow?void 0:N.ow.DATE_DASH_TIME_FORMAT):null};await l((0,h.DS)(a))}finally{}})({end_date:e,start_date:Z,status:""})},disabled:!Z,disabledDate:e=>!!Z&&e.isBefore(Z,"day")})]})]})}),(0,_.jsx)("div",{className:"card card-body",children:(0,_.jsx)("div",{className:"table-responsive",children:(0,_.jsxs)(m.b,{value:(null===R||void 0===R?void 0:R.length)>0?R:[],paginator:!0,rows:15,globalFilter:L,rowsPerPageOptions:(null===R||void 0===R?void 0:R.length)>50?[20,30,50,null===R||void 0===R?void 0:R.length]:[20,30,40],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",loading:O,sortField:z,sortOrder:q,emptyMessage:(0,_.jsx)("span",{style:{textAlign:"center",display:"block"},children:"Daily work update not found."}),children:[(0,_.jsx)(u.V,{field:"id",header:"Id",style:{minWidth:"4rem"},body:(e,a)=>a.rowIndex+1,sortable:!0,showFilterMenu:!0}),(0,_.jsx)(u.V,{field:"name",header:"Name",style:{minWidth:"10rem",whiteSpace:"nowrap",textTransform:"capitalize"},body:e=>(0,_.jsx)("span",{className:"me-2",children:e.name||"-"})}),(0,_.jsx)(u.V,{field:"date",header:"Date",style:{minWidth:"8rem"},body:e=>(0,_.jsx)("span",{className:"me-2",children:(0,b.Ny)(null===e||void 0===e?void 0:e.date,null===N.ow||void 0===N.ow?void 0:N.ow.DATE_DASH_TIME_FORMAT,null===N.ow||void 0===N.ow?void 0:N.ow.DATE_FORMAT)||"-"})}),(0,_.jsx)(u.V,{field:"title",header:"Title",style:{minWidth:"10rem",whiteSpace:"nowrap",textTransform:"capitalize"},body:e=>(0,_.jsx)("span",{className:"me-2",children:e.title||"-"})}),(0,_.jsx)(u.V,{field:"status",header:"Action",style:{minWidth:"6rem"},body:e=>(0,_.jsxs)("div",{className:"action-btn",children:[(0,_.jsx)(o.N_,{onClick:()=>{oe(e),de(!0)},state:e,className:"text-custom-theam edit cursor_pointer",children:(0,_.jsx)("i",{className:"ti ti-eye fs-7"})}),(0,_.jsx)("a",{className:"text-danger delete ms-2 cursor_pointer",onClick:()=>{(0,b.GF)(l,x.bt.DELETE_MODEL),oe(e)},children:(0,_.jsx)("i",{className:"ti ti-trash fs-7"})})]})})]})})})]})]}),(0,_.jsx)("div",{className:"modal custom-modal  ".concat(le?"fade show d-block ":"d-none"),id:"addnotesmodal",tabIndex:-1,role:"dialog","aria-labelledby":"addnotesmodalTitle","aria-hidden":"true",children:(0,_.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered",role:"document",children:(0,_.jsxs)("div",{className:"modal-content border-0",children:[(0,_.jsxs)("div",{className:"modal-header bg-primary",style:{borderRadius:"10px 10px 0px 0px"},children:[(0,_.jsxs)("h6",{className:"modal-title fs-5",children:[ne?"Edit Work Update":"Add Work Update"," "]}),(0,_.jsx)("button",{type:"button",className:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>{ce()}})]}),(0,_.jsx)("div",{className:"modal-body",children:(0,_.jsx)("form",{onSubmit:A(async e=>{l((0,h.iC)(!0));try{let i,d={date:(0,b.Ny)(null===e||void 0===e?void 0:e.date,null===N.ow||void 0===N.ow?void 0:N.ow.DATE_FORMAT,null===N.ow||void 0===N.ow?void 0:N.ow.DATE_DASH_TIME_FORMAT),description:e[N.ic.DESCRIPTION],title:e[N.ic.TITLE]};var a,s;if(ne?(d.work_id=e[N.ic.ID],d.remark="",i=await(0,r.fi)(d)):i=await(0,r._u)(d),i.code==x.NC.SUCCESS)(0,c.k1)(null===(a=i)||void 0===a?void 0:a.message),l((0,h.DS)()),ce();else(0,c.uU)(null===(s=i)||void 0===s?void 0:s.message)}catch(i){console.error("Error in onSubmitData:",i),(0,c.uU)("Something went wrong. Please try again.")}finally{l((0,h.iC)(!1)),ce()}}),children:(0,_.jsx)("div",{className:"col-lg-12",children:(0,_.jsx)("div",{className:"card-body p-2",children:(0,_.jsxs)("div",{className:"row g-3",children:[(0,_.jsx)("input",(0,s.A)({type:"hidden",value:"some_default_value"},f(N.ic.ID))),(0,_.jsxs)("div",{className:"row g-3",children:[(0,_.jsxs)("div",{className:"col-md-4",children:[(0,_.jsxs)("label",{htmlFor:"dob1",className:"form-label fw-semibold",children:["Date ",(0,_.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,_.jsx)(w.xI,{name:N.ic.DATE,control:M,rules:{required:"Date is required"},render:e=>{let{field:a}=e;return(0,_.jsx)(g.A,{id:N.ic.DATE,picker:"date",disabled:ne,className:"form-control custom-datepicker w-100",format:null===N.ow||void 0===N.ow?void 0:N.ow.DATE_FORMAT,value:a.value?T()(a.value,null===N.ow||void 0===N.ow?void 0:N.ow.DATE_FORMAT):T()(),onChange:e=>a.onChange(e?T()(e).format(null===N.ow||void 0===N.ow?void 0:N.ow.DATE_FORMAT):T()())})}}),F[N.ic.DATE]&&(0,_.jsx)("small",{className:"text-danger",children:F[N.ic.DATE].message})]}),(0,_.jsxs)("div",{className:"col-md-8",children:[(0,_.jsxs)("label",{htmlFor:"lastname",className:"form-label fw-semibold",children:["Title ",(0,_.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,_.jsx)("div",{className:"input-group border rounded-1",children:(0,_.jsx)("input",(0,s.A)({type:"text",className:"form-control ps-2",placeholder:"Enter title",autoComplete:"nope"},f(N.ic.TITLE,(0,b.DX)(N.ic.TITLE,"Enter title"))))}),(0,_.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(e=F[N.ic.TITLE])||void 0===e?void 0:e.message})]})]}),(0,_.jsxs)("div",{className:"mb-3",children:[(0,_.jsxs)("label",{htmlFor:"leave_reason",className:"form-label fw-semibold",children:["Work Description ",(0,_.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,_.jsx)("div",{className:"input-group border rounded-1",children:(0,_.jsx)(w.xI,{name:N.ic.DESCRIPTION,control:M,rules:{required:"Enter work description"},render:e=>{let{field:a}=e;return(0,_.jsx)(k(),(0,s.A)((0,s.A)({},a),{},{theme:"snow",placeholder:"Enter work description",className:"custom-quill w-100",style:{minHeight:"250px"}}))}})}),(0,_.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(a=F[N.ic.DESCRIPTION])||void 0===a?void 0:a.message})]}),(0,_.jsxs)("div",{className:"modal-footer justify-content-center",children:[(0,_.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>{ce()},children:"Cancel"}),(0,_.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})})})})})]})})}),le&&(0,_.jsx)("div",{className:"modal-backdrop fade show"}),(0,_.jsx)("div",{className:"modal custom-modal  ".concat(ie?"fade show d-block ":"d-none"),id:"addnotesmodal",tabIndex:-1,role:"dialog","aria-labelledby":"addnotesmodalTitle","aria-hidden":"true",children:(0,_.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered",role:"document",children:(0,_.jsxs)("div",{className:"modal-content border-0",children:[(0,_.jsxs)("div",{className:"modal-header bg-primary",style:{borderRadius:"10px 10px 0px 0px"},children:[(0,_.jsx)("h6",{className:"modal-title fs-5",children:"Work Update Details "}),(0,_.jsx)("button",{type:"button",className:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>{de(!1),oe({})}})]}),(0,_.jsx)("div",{className:"modal-body ",children:(0,_.jsxs)("div",{className:"row m-2",children:[[{label:"Date",value:(0,b.Ny)(null===te||void 0===te?void 0:te.date,null===N.ow||void 0===N.ow?void 0:N.ow.DATE_DASH_TIME_FORMAT,null===N.ow||void 0===N.ow?void 0:N.ow.DATE_FORMAT)||"-"},{label:"Title",value:null===te||void 0===te?void 0:te.title},{label:"Work Description",value:(0,b.J2)(null!==te&&void 0!==te&&te.description?null===te||void 0===te?void 0:te.description:"")}].map((e,a)=>(0,_.jsx)("div",{className:"col-12 mb-3 pb-2 border-1 border-bottom",children:"Reason"==(null===e||void 0===e?void 0:e.label)?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("p",{className:"mb-1 fs-4",children:e.label}),(0,_.jsx)("h6",{dangerouslySetInnerHTML:{__html:e.value}})]}):e.value&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("p",{className:"mb-1 fs-3",children:e.label}),(0,_.jsx)("h6",{className:"fw-meduim mb-0 fs-4 text-capitalize",children:e.value||"N/A"})]})},a)),(null===te||void 0===te?void 0:te.reason)&&(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:"col-md-6 mb-4",children:[(0,_.jsx)("p",{className:"mb-1 fs-4",children:"Reason"}),(0,_.jsx)("h6",{className:"fw-meduim mb-0 fs-5 text-capitalize",children:te.reason||"N/A"})]})}),(null===te||void 0===te?void 0:te.admin_reason)&&(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:"col-md-6 mb-4",children:[(0,_.jsx)("p",{className:"mb-1 fs-4",children:"Admin Reason"}),(0,_.jsx)("h6",{className:"fw-meduim mb-0 fs-5 text-capitalize",children:te.admin_reason||"N/A"})]})})]})})]})})}),ie&&(0,_.jsx)("div",{className:"modal-backdrop fade show"}),I.isOpen&&(null===I||void 0===I?void 0:I.modalType)===x.bt.DELETE_MODEL&&(0,_.jsx)(p.A,{children:(0,_.jsx)(j.b3,{onConfirm:async e=>{if(e){l((0,h.iC)(!0));try{let e={work_id:null===te||void 0===te?void 0:te.id};const a=await(0,r.mR)(e);if(a.code==(null===x.NC||void 0===x.NC?void 0:x.NC.SUCCESS)){const e=null===R||void 0===R?void 0:R.filter(e=>e.id!==(null===te||void 0===te?void 0:te.id));l((0,h.Ub)(e)),(0,b.MF)(l),(0,c.k1)(null===a||void 0===a?void 0:a.message)}else(0,b.MF)(l),(0,c.uU)(null===a||void 0===a?void 0:a.message)}catch(a){(0,b.MF)(l),(0,c.uU)("Something went wrong. Please try again.")}finally{l((0,h.iC)(!1))}}}})})]})}},75061:(e,a,l)=>{l.d(a,{A:()=>o});var s=l(9950),i=l(82569),d=l(59091),t=l(44414);const o=e=>{let{per_page:a,pageCount:l,onPageChange:o,page:n,lableName:r}=e;const c=(0,i.wA)(),[m,u]=(0,s.useState)(),h=Math.ceil(l/a)||4;(0,s.useEffect)(()=>{u(n),c((0,d.MU)(!0))},[n]);const x=e=>{e>=1&&e<=h&&(u(e),o(e))};return(0,t.jsx)(t.Fragment,{children:a<l?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"showing-results border-top ",children:(0,t.jsxs)("nav",{"aria-label":"Page navigation example",className:"pagination-container border-bottom mt-4 mb-0",children:[(0,t.jsxs)("ul",{className:"pagination ",children:[(0,t.jsx)("li",{className:"page-item  ".concat(1===m?"disabled":""),children:(0,t.jsx)("button",{className:"page-link text-dark","aria-label":"First",onClick:()=>x(1),disabled:1===m,children:(0,t.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),(0,t.jsx)("li",{className:"page-item ".concat(1===m?"disabled":""),children:(0,t.jsx)("button",{className:"page-link text-dark","aria-label":"Previous",onClick:()=>x(m-1),disabled:1===m,children:(0,t.jsx)("span",{"aria-hidden":"true",children:"<"})})}),(()=>{const e=[];let a=m-Math.floor(1.5);a=Math.max(a,1);const s=Math.min(a+3-1,h);s-a<2&&(a=Math.max(s-3+1,1));for(let i=a;i<=s;i++){const a=m===i;if(l>0){const l="page-link font_18 ".concat(a?"text-dark active-link-pagination":"text-muted"),s="page-item ".concat(a?"text-dark ":"text-muted");null===e||void 0===e||e.push((0,t.jsx)("li",{className:s,children:(0,t.jsx)("button",{className:l,onClick:()=>!a&&x(i),disabled:a,style:{color:"black",backgroundColor:"white"},children:i})},i))}}return e})(),(0,t.jsx)("li",{className:"page-item ".concat(m===h?"disabled":""),children:(0,t.jsx)("button",{className:"page-link text-dark","aria-label":"Next",onClick:()=>x(m+1),disabled:m===h,children:(0,t.jsx)("span",{"aria-hidden":"true",children:">"})})}),(0,t.jsx)("li",{className:"page-item ".concat(m===h?"disabled":""),children:(0,t.jsx)("button",{className:"page-link text-dark","aria-label":"Last",onClick:()=>x(h),disabled:m===h,children:(0,t.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]}),(0,t.jsxs)("p",{className:"text-capitalize showing-text ms-1 ",children:["Showing ",m," to ",Math.min(m*a,l)||0," of ",l," entries"]})]})})}):null})}}}]);