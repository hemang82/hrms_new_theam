"use strict";(self.webpackChunkHRMS_Admin_Panel=self.webpackChunkHRMS_Admin_Panel||[]).push([[8433],{38433:(e,l,s)=>{s.r(l),s.d(l,{default:()=>A});var i=s(89379),a=s(9950),t=s(28429),n=s(9449),o=s(82391),d=s(52610),r=s(79739),c=s(32003),m=s(70591),u=s(82543),v=s(82569),h=s(59091),p=s(61977),x=s(60984),b=s(82137),j=s(46004),N=s(4159),f=s.n(N),g=s(90607),y=s(35254),E=s.n(y),w=(s(17687),s(44414));function A(){var e,l,s,N,y;const A=(0,t.Zp)(),C=(0,v.wA)(),S=(0,t.zy)();var P=null===S||void 0===S?void 0:S.state;const{customerList:{data:R}}=(0,v.d4)(e=>e.masterslice),[O,I]=(0,a.useState)(!1),[Y,D]=(0,a.useState)(null),{register:M,handleSubmit:T,setValue:_,clearErrors:k,reset:z,watch:F,control:L,trigger:q,formState:{errors:H}}=(0,n.mN)({defaultValues:{dates:[{value:"",isEdit:!1}]}}),{fields:U,append:J,remove:V}=(0,n.jz)({control:L,name:"dates"});(0,a.useEffect)(()=>{var e;const l={emp_leave_company:null===(e=u.wz[0])||void 0===e?void 0:e.key};0===(null===R||void 0===R?void 0:R.length)&&C((0,h.hI)(l))},[]),(0,a.useEffect)(()=>{if(P&&(null===R||void 0===R?void 0:R.length)>0){var e,l;C((0,h.iC)(!0));const s=null!==P&&void 0!==P&&P.team?null===P||void 0===P||null===(e=P.team)||void 0===e?void 0:e.split(",").map(Number):[];null===R||void 0===R||R.filter(e=>null===s||void 0===s?void 0:s.includes(null===e||void 0===e?void 0:e.id));_(u.ic.EMPLOYEE,s||[]),_(u.ic.NAME,(null===P||void 0===P?void 0:P.name)||null),_(u.ic.DESCRIPTION,(null===P||void 0===P?void 0:P.description)||null),_(u.ic.PRIORITY,(null===P||void 0===P?void 0:P.priority)||null),console.log("ProjectDataProjectData",P);const i=(null===P||void 0===P?void 0:P.deadline)&&(null===P||void 0===P||null===(l=P.deadline)||void 0===l?void 0:l.map(e=>({value:f()(e,"YYYY-MM-DD").format("DD-MM-YYYY"),isEdit:!0}))),a=i.length>0?i:[{value:"",isEdit:!1}];_("dates",a),C((0,h.iC)(!1))}},[P,R]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(p.default,{isActive:O,message:"Please Wait"}),(0,w.jsxs)("div",{className:"container-fluid mw-100",children:[(0,w.jsx)(r.A,{title:P?"Edit Project":"Add Project",header:"Project List",subHeaderOnlyView:P?"Edit Project":"Add Project"}),(0,w.jsx)("div",{className:"row",children:(0,w.jsx)("div",{className:"col-12 justify-content-center",children:(0,w.jsx)("div",{className:"row justify-content-center ",children:(0,w.jsx)("form",{onSubmit:T(async e=>{try{var l,s,i,a;C((0,h.iC)(!0));const n=null!==(l=null===(s=e.dates.find(e=>!1===e.isEdit))||void 0===s?void 0:s.value)&&void 0!==l?l:"";let r={name:e[u.ic.NAME],description:e[u.ic.DESCRIPTION],deadline:n?[(0,m.R1)(n,null===u.ow||void 0===u.ow?void 0:u.ow.DATE_FORMAT,null===u.ow||void 0===u.ow?void 0:u.ow.DATE_DASH_TIME_FORMAT)]:[],team:1==(null===(i=e[u.ic.EMPLOYEE])||void 0===i?void 0:i.length)?null===(a=e[u.ic.EMPLOYEE][0])||void 0===a?void 0:a.toString():e[u.ic.EMPLOYEE],priority:e[u.ic.PRIORITY]};var t;if(console.log("requestrequestrequest",r,"data",n),P)r.project_id=null===P||void 0===P||null===(t=P.id)||void 0===t?void 0:t.toString(),(0,d.e3)(r).then(e=>{(null===e||void 0===e?void 0:e.code)==c.NC.SUCCESS?((0,o.k1)(null===e||void 0===e?void 0:e.message),C((0,h.EF)({})),A(null===g.R||void 0===g.R?void 0:g.R.LIST_PROJECT)):(0,o.uU)(e.message)});else(0,d.By)(r).then(e=>{(null===e||void 0===e?void 0:e.code)==c.NC.SUCCESS?((0,o.k1)(null===e||void 0===e?void 0:e.message),A(null===g.R||void 0===g.R?void 0:g.R.LIST_PROJECT),C((0,h.EF)({})),C((0,h.iC)(!1))):((0,o.uU)(e.message),C((0,h.iC)(!1)))})}catch(n){(0,o.uU)("Somthing went wrong"),C((0,h.iC)(!1))}}),children:(0,w.jsx)("div",{className:"card",children:(0,w.jsx)("div",{className:"card-body",children:(0,w.jsxs)("div",{className:"row col-12 col-md-12 ",children:[(0,w.jsxs)("div",{className:"col-md-6",children:[(0,w.jsxs)("div",{className:"mb-4",children:[(0,w.jsxs)("label",{htmlFor:"lastname",className:"form-label fw-semibold",children:["Project Name ",(0,w.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,w.jsx)("div",{className:"input-group border rounded-1",children:(0,w.jsx)("input",(0,i.A)({type:"text",className:"form-control ps-2",placeholder:"Enter project name",autoComplete:"nope"},M(u.ic.NAME,(0,m.DX)(u.ic.NAME,"Enter project name"))))}),(0,w.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(e=H[u.ic.NAME])||void 0===e?void 0:e.message})]}),(0,w.jsxs)("div",{className:"mb-4",children:[(0,w.jsxs)("label",{htmlFor:"leave_reason",className:"form-label fw-semibold",children:["Project Description ",(0,w.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,w.jsx)("div",{className:" border rounded-1",children:(0,w.jsx)(n.xI,{name:u.ic.DESCRIPTION,control:L,rules:{required:"Enter project description"},render:e=>{let{field:l}=e;return(0,w.jsx)(E(),(0,i.A)((0,i.A)({},l),{},{theme:"snow",placeholder:"Enter project description",className:"custom-quill w-100",style:{minHeight:"200px"}}))}})}),(0,w.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(l=H[u.ic.DESCRIPTION])||void 0===l?void 0:l.message})]})]}),(0,w.jsxs)("div",{className:"col-12 col-md-6",children:[(0,w.jsxs)("div",{className:"mb-4",children:[(0,w.jsxs)("label",{htmlFor:"gender1",className:"form-label fw-semibold",children:["Select Employee",(0,w.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,w.jsx)(n.xI,{name:u.ic.EMPLOYEE,control:L,rules:{required:"Select at least one employee"},render:e=>{let{field:l}=e;return(0,w.jsx)(b.A,{mode:"multiple",style:{width:"100%",height:"40px"},placeholder:"Select employee",value:l.value||[],onChange:e=>{l.onChange(e),_(u.ic.EMPLOYEE,e)},options:(null===R||void 0===R?void 0:R.map(e=>({label:e.name,value:e.id})))||[],optionRender:e=>(0,w.jsx)(j.A,{children:null===e||void 0===e?void 0:e.label}),className:"border rounded-1"})}}),(0,w.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(s=H[u.ic.EMPLOYEE])||void 0===s?void 0:s.message})]}),(0,w.jsxs)("div",{className:"row g-3",children:[(0,w.jsx)("div",{className:"col-12 col-md-4",children:(0,w.jsxs)("div",{className:"mb-2 ",children:[(0,w.jsxs)("label",{htmlFor:"priority",className:"form-label fw-semibold mb-2",children:["Priority ",(0,w.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,w.jsx)("div",{className:"input-group p-1",children:(0,w.jsx)(n.xI,{name:u.ic.PRIORITY,control:L,rules:{required:"Select priority"},render:e=>{let{field:l}=e;return(0,w.jsx)(b.A,{style:{width:"100%",height:"40px"},placeholder:"Select priority",value:l.value||void 0,onChange:e=>{l.onChange(e),_(u.ic.PRIORITY,e)},options:(null===u.Rz||void 0===u.Rz?void 0:u.Rz.map(e=>({label:e.value,value:e.key})))||[],optionRender:e=>(0,w.jsx)(j.A,{children:null===e||void 0===e?void 0:e.label}),className:"border rounded-1"})}})}),H[u.ic.PRIORITY]&&(0,w.jsx)("small",{className:"text-danger",children:null===(N=H[u.ic.PRIORITY])||void 0===N?void 0:N.message})]})}),(0,w.jsxs)("div",{className:"col-12 col-md-8 mb-4",children:[(0,w.jsxs)("div",{className:"d-flex justify-content-between mb-0 align-items-center p-1",children:[(0,w.jsxs)("label",{className:"form-label fw-semibold mb-1",children:["Deadline Dates ",(0,w.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),!(null!==U&&void 0!==U&&U.some(e=>!1===e.isEdit))&&(0,w.jsx)("button",{type:"button",className:"btn btn-sm btn-info",onClick:()=>J({value:"",isEdit:!1}),children:"+ Add"})]}),U.map((e,l)=>(0,w.jsx)("div",{className:"d-flex align-items-center mb-2",children:(0,w.jsx)(n.xI,{name:"dates.".concat(l,".value"),control:L,rules:{required:"Select Deadline Date"},render:l=>{let{field:s}=l;return(0,w.jsx)(x.A,{className:"form-control custom-datepicker w-100",format:"DD-MM-YYYY",value:s.value?f()(s.value,"DD-MM-YYYY"):null,onChange:e=>s.onChange(e?f()(e).format("DD-MM-YYYY"):null),allowClear:!1,disabled:!0===e.isEdit,placeholder:"Select Deadline Date"})}})},e.id)),H.dates&&(0,w.jsx)("small",{className:"text-danger",children:null===(y=H.dates)||void 0===y?void 0:y.map((e,l)=>{var s;return null===e||void 0===e||null===(s=e.value)||void 0===s?void 0:s.message}).filter(Boolean).join(", ")})]})]})]}),(0,w.jsxs)("div",{className:"modal-footer justify-content-center mb-3",children:[(0,w.jsx)("button",{type:"reset",className:"btn btn-danger me-2",onClick:()=>{A(null===g.R||void 0===g.R?void 0:g.R.LIST_PROJECT)},children:"Cancel"}),(0,w.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})})})})})})})]})]})}},46004:(e,l,s)=>{s.d(l,{A:()=>b});var i=s(9950),a=s(48738),t=s.n(a),n=s(50604);function o(e){return["small","middle","large"].includes(e)}function d(e){return!!e&&("number"===typeof e&&!Number.isNaN(e))}var r=s(5741),c=s(93457);const m=i.createContext({latestIndex:0}),u=m.Provider,v=e=>{let{className:l,index:s,children:a,split:t,style:n}=e;const{latestIndex:o}=i.useContext(m);return null===a||void 0===a?null:i.createElement(i.Fragment,null,i.createElement("div",{className:l,style:n},a),s<o&&t&&i.createElement("span",{className:"".concat(l,"-split")},t))};var h=s(44655),p=function(e,l){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&l.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)l.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s};const x=i.forwardRef((e,l)=>{var s;const{getPrefixCls:a,direction:c,size:m,className:x,style:b,classNames:j,styles:N}=(0,r.TP)("space"),{size:f=(null!==m&&void 0!==m?m:"small"),align:g,className:y,rootClassName:E,children:w,direction:A="horizontal",prefixCls:C,split:S,style:P,wrap:R=!1,classNames:O,styles:I}=e,Y=p(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[D,M]=Array.isArray(f)?f:[f,f],T=o(M),_=o(D),k=d(M),z=d(D),F=(0,n.A)(w,{keepEmpty:!0}),L=void 0===g&&"horizontal"===A?"center":g,q=a("space",C),[H,U,J]=(0,h.A)(q),V=t()(q,x,U,"".concat(q,"-").concat(A),{["".concat(q,"-rtl")]:"rtl"===c,["".concat(q,"-align-").concat(L)]:L,["".concat(q,"-gap-row-").concat(M)]:T,["".concat(q,"-gap-col-").concat(D)]:_},y,E,J),B=t()("".concat(q,"-item"),null!==(s=null===O||void 0===O?void 0:O.item)&&void 0!==s?s:j.item);let G=0;const W=F.map((e,l)=>{var s;null!==e&&void 0!==e&&(G=l);const a=(null===e||void 0===e?void 0:e.key)||"".concat(B,"-").concat(l);return i.createElement(v,{className:B,key:a,index:l,split:S,style:null!==(s=null===I||void 0===I?void 0:I.item)&&void 0!==s?s:N.item},e)}),Z=i.useMemo(()=>({latestIndex:G}),[G]);if(0===F.length)return null;const K={};return R&&(K.flexWrap="wrap"),!_&&z&&(K.columnGap=D),!T&&k&&(K.rowGap=M),H(i.createElement("div",Object.assign({ref:l,className:V,style:Object.assign(Object.assign(Object.assign({},K),b),P)},Y),i.createElement(u,{value:Z},W)))});x.Compact=c.Ay;const b=x},79739:(e,l,s)=>{s.d(l,{A:()=>r});s(9950);var i=s(28429),a=s(42074),t=s(32003),n=s(82569),o=s(59091),d=(s(90607),s(44414));function r(e){let{title:l,header:s,subHeader:r,subHeaderOnlyView:c}=e;const{slidebarToggle:m}=(0,n.d4)(e=>e.masterslice),u=(0,i.zy)(),v=(0,n.wA)(),h=((0,i.Zp)(),null===u||void 0===u?void 0:u.pathname);let p=null===h||void 0===h?void 0:h.split("/");var x=JSON.parse(localStorage.getItem(t.Ay.AUTH_KEY));return console.log("userDetailsuserDetails",x),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"card bg-light-info shadow-none border-0 position-relative overflow-hidden make-header",children:(0,d.jsx)("div",{className:"card-body px-4 py-3",children:(0,d.jsxs)("div",{className:"row align-items-center",children:[(0,d.jsxs)("div",{className:"col-12 col-md-9 d-flex align-items-center gap-3 mb-3 mb-md-0",children:[(0,d.jsx)("button",{type:"button",className:"btn btn-light d-flex align-items-center justify-content-center p-2 shadow-sm rounded-circle",onClick:()=>{v((0,o.ST)(!m)),(()=>{const e=document.querySelector("body");if(e&&e.setAttribute("data-sidebartype",m?"mini-sidebar":"full"),window.innerWidth<=992){const e=document.getElementById("left_side_menu_id");e&&(e.style.display=m?"none":"block")}})()},children:(0,d.jsx)("i",{className:"ti ti-menu-2 fs-5 text-custom-theam"})}),(0,d.jsx)("nav",{"aria-label":"breadcrumb",className:"ms-2",children:(0,d.jsxs)("ol",{className:"breadcrumb mb-0",children:[(0,d.jsx)("li",{className:"breadcrumb-item",children:(0,d.jsx)(a.N_,{to:"/dashboard",className:"text-decoration-none",children:"Dashboard"})}),(0,d.jsx)("li",{className:"breadcrumb-item",children:(0,d.jsx)(a.N_,{to:"/".concat(null===p||void 0===p?void 0:p[1]),className:"text-decoration-none",children:s})}),r&&(0,d.jsx)("li",{className:"breadcrumb-item",children:(0,d.jsx)(a.N_,{to:h,className:"text-decoration-none",children:r})}),c&&(0,d.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:c})]})})]}),(0,d.jsxs)("div",{className:"col-12 col-md-3 d-flex justify-content-md-end justify-content-center ",children:[(0,d.jsx)("img",{src:(null===x||void 0===x?void 0:x.profile_image)||(null===t.Ay||void 0===t.Ay?void 0:t.Ay.DEFAULT_IMAGE),alt:"User Avatar",className:"rounded-circle me-2 d-none d-sm-block",style:{width:"40px",height:"40px",objectFit:"cover"}}),(0,d.jsxs)("div",{className:"d-none d-sm-block text-end",children:[(null===x||void 0===x?void 0:x.email)&&(0,d.jsx)("div",{className:"fw-semibold mb-0 ",style:{fontSize:"0.9rem"},children:null===x||void 0===x?void 0:x.email}),(null===x||void 0===x?void 0:x.role)&&(0,d.jsx)("div",{className:"fw-semibold mb-0 text-capitalize text-custom-theam",style:{fontSize:"0.9rem"},children:1==(null===x||void 0===x?void 0:x.role)?"Admin":"Sub Admin"})]})]})]})})})})}}}]);