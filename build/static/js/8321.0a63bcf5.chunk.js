"use strict";(self.webpackChunkHRMS_Admin_Panel=self.webpackChunkHRMS_Admin_Panel||[]).push([[8321],{46004:(e,l,a)=>{a.d(l,{A:()=>A});var s=a(9950),i=a(48738),o=a.n(i),t=a(50604);function c(e){return["small","middle","large"].includes(e)}function d(e){return!!e&&("number"===typeof e&&!Number.isNaN(e))}var n=a(5741),r=a(93457);const m=s.createContext({latestIndex:0}),v=m.Provider,u=e=>{let{className:l,index:a,children:i,split:o,style:t}=e;const{latestIndex:c}=s.useContext(m);return null===i||void 0===i?null:s.createElement(s.Fragment,null,s.createElement("div",{className:l,style:t},i),a<c&&o&&s.createElement("span",{className:"".concat(l,"-split")},o))};var E=a(44655),p=function(e,l){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&l.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)l.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(a[s[i]]=e[s[i]])}return a};const h=s.forwardRef((e,l)=>{var a;const{getPrefixCls:i,direction:r,size:m,className:h,style:A,classNames:N,styles:_}=(0,n.TP)("space"),{size:b=(null!==m&&void 0!==m?m:"small"),align:f,className:x,rootClassName:j,children:y,direction:g="horizontal",prefixCls:L,split:S,style:w,wrap:D=!1,classNames:T,styles:C}=e,O=p(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[Y,R]=Array.isArray(b)?b:[b,b],M=c(R),P=c(Y),I=d(R),V=d(Y),F=(0,t.A)(y,{keepEmpty:!0}),H=void 0===f&&"horizontal"===g?"center":f,k=i("space",L),[q,G,z]=(0,E.A)(k),U=o()(k,h,G,"".concat(k,"-").concat(g),{["".concat(k,"-rtl")]:"rtl"===r,["".concat(k,"-align-").concat(H)]:H,["".concat(k,"-gap-row-").concat(R)]:M,["".concat(k,"-gap-col-").concat(Y)]:P},x,j,z),B=o()("".concat(k,"-item"),null!==(a=null===T||void 0===T?void 0:T.item)&&void 0!==a?a:N.item);let W=0;const Z=F.map((e,l)=>{var a;null!==e&&void 0!==e&&(W=l);const i=(null===e||void 0===e?void 0:e.key)||"".concat(B,"-").concat(l);return s.createElement(u,{className:B,key:i,index:l,split:S,style:null!==(a=null===C||void 0===C?void 0:C.item)&&void 0!==a?a:_.item},e)}),X=s.useMemo(()=>({latestIndex:W}),[W]);if(0===F.length)return null;const J={};return D&&(J.flexWrap="wrap"),!P&&V&&(J.columnGap=Y),!M&&I&&(J.rowGap=R),q(s.createElement("div",Object.assign({ref:l,className:U,style:Object.assign(Object.assign(Object.assign({},J),A),w)},O),s.createElement(v,{value:X},Z)))});h.Compact=r.Ay;const A=h},48321:(e,l,a)=>{a.r(l),a.d(l,{default:()=>j});var s=a(89379),i=a(9950),o=(a(4695),a(28429)),t=a(9449),c=(a(20404),a(12815),a(97514),a(82391)),d=a(52610),n=a(79739),r=(a(40078),a(34263),a(32003)),m=(a(25825),a(70591)),v=a(82543),u=a(82569),E=a(59091),p=(a(77923),a(98631),a(61977)),h=a(60984),A=a(82137),N=a(46004),_=a(4159),b=a.n(_),f=a(90607),x=a(44414);function j(){var e,l,a,_,j,y,g;const L=(0,o.Zp)(),S=(0,u.wA)(),w=(0,o.zy)(),{customerList:{data:D}}=(0,u.d4)(e=>e.masterslice),[T,C]=(0,i.useState)(null),[O,Y]=(0,i.useState)(""),[R,M]=(0,i.useState)(null),[P,I]=(0,i.useState)(""),[V,F]=(0,i.useState)(!1),[H,k]=(0,i.useState)(!1),[q,G]=(0,i.useState)(b()()),[z,U]=(0,i.useState)(b()()),[B,W]=(0,i.useState)(null),[Z,X]=(0,i.useState)([]);var J=null===w||void 0===w?void 0:w.state;const{register:K,handleSubmit:Q,setValue:$,clearErrors:ee,reset:le,watch:ae,control:se,trigger:ie,getValues:oe,resetField:te,formState:{errors:ce}}=(0,t.mN)();(0,i.useEffect)(()=>{var e;const l={emp_leave_company:null===(e=v.wz[0])||void 0===e?void 0:e.key};0===(null===D||void 0===D?void 0:D.length)&&S((0,E.hI)(l))},[]),(0,i.useEffect)(()=>{J&&(S((0,E.iC)(!0)),(0,d.JG)({employee_id:null===J||void 0===J?void 0:J.id.toString()}).then(e=>{if((null===e||void 0===e?void 0:e.code)==r.NC.SUCCESS){let l=null===e||void 0===e?void 0:e.data;$(null===v.ic||void 0===v.ic?void 0:v.ic.NAME,null===l||void 0===l?void 0:l.name),$(null===v.ic||void 0===v.ic?void 0:v.ic.EMAIL,null===l||void 0===l?void 0:l.email),$(null===v.ic||void 0===v.ic?void 0:v.ic.MOBILE,null===l||void 0===l?void 0:l.phone_number),$(null===v.ic||void 0===v.ic?void 0:v.ic.CURRENT_ADDRESH,null===l||void 0===l?void 0:l.location),$(null===v.ic||void 0===v.ic?void 0:v.ic.GENDER,(null===l||void 0===l?void 0:l.gender)||"M"),G(null!==l&&void 0!==l&&l.birth_date?b()(l.birth_date):null),$(null===v.ic||void 0===v.ic?void 0:v.ic.PASSWORD,null===l||void 0===l?void 0:l.password),$(null===v.ic||void 0===v.ic?void 0:v.ic.MONTHLY_SALARY,null===l||void 0===l?void 0:l.salary_monthly),$(null===v.ic||void 0===v.ic?void 0:v.ic.SENIOR_NAME,null===l||void 0===l?void 0:l.senior_name),$(null===v.ic||void 0===v.ic?void 0:v.ic.DESIGNATION,null===l||void 0===l?void 0:l.designation),U(null!==l&&void 0!==l&&l.joining_date?b()(l.joining_date):null),S((0,E.iC)(!1))}})),console.log("userData?.departmentuserData?.department",null===J||void 0===J?void 0:J.department)},[J]),(0,i.useEffect)(()=>{var e;null===B||void 0===B||!B.emp_id||"casual"!=ae(v.ic.LEAVE_TYPE)&&"compoff"!=ae(v.ic.LEAVE_TYPE)||(0,d.vD)({action:"admin",employee_id:(null===B||void 0===B||null===(e=B.emp_id)||void 0===e?void 0:e.toString())||"",leave_type:ae(v.ic.LEAVE_TYPE)}).then(e=>{if((null===e||void 0===e?void 0:e.code)==r.NC.SUCCESS){let l=null===e||void 0===e?void 0:e.data;X(l||[])}})},[B,ae(v.ic.LEAVE_TYPE)]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(p.default,{isActive:V,message:"Please Wait"}),(0,x.jsxs)("div",{className:"container-fluid mw-100",children:[(0,x.jsx)(n.A,{title:J?"Edit Employee":"Add Employee",header:"Employee List",subHeaderOnlyView:J?"Edit Employee":"Add Employee"}),(0,x.jsxs)("div",{className:"row",children:[B&&(0,x.jsx)("div",{className:"col-12 justify-content-center",children:(0,x.jsx)("div",{className:"card  ",children:(0,x.jsxs)("div",{className:"p-3 row_2",children:[(0,x.jsx)("div",{className:"py-3 border-bottom chat-meta-user d-flex align-items-center justify-content-between mb-4",children:(0,x.jsx)("h5",{className:"text-secondary mb-0 fw-semibold fs-4",children:"Employee Leave Details"})}),(0,x.jsx)("div",{className:"row",children:[{label:"Casual Leave",value:null===B||void 0===B?void 0:B.casual},{label:"Compoff Leave",value:null===B||void 0===B?void 0:B.compoff},{label:"Total Leave",value:(Number(null===B||void 0===B?void 0:B.casual)||0)+(Number(null===B||void 0===B?void 0:B.compoff)||0)}].map((e,l)=>(0,x.jsx)("div",{className:"col-12 col-sm-6 col-md-3 col-lg-4 ",children:(0,x.jsx)("div",{className:"card border-1 zoom-in them-light shadow-sm",children:(0,x.jsxs)("div",{className:"p-2 text-center",children:[(0,x.jsx)("p",{className:"fw-semibold fs-5 text-dark ",children:e.label}),(0,x.jsx)("h5",{className:"fw-semibold text-dark mb-0 fs-5",children:e.value||"-"})]})},l)}))})]})})}),(0,x.jsx)("div",{className:"col-12 justify-content-center",children:(0,x.jsx)("div",{className:"row justify-content-center ",children:(0,x.jsx)("form",{onSubmit:Q(async e=>{try{S((0,E.iC)(!0));const l=Z.filter(l=>{var a;return null===(a=e[v.ic.SELECTED_LEAVE_DATES])||void 0===a?void 0:a.includes(l.id)}).map(e=>(0,m.Yq)(e.created_at,null===v.ow||void 0===v.ow?void 0:v.ow.DATE_DASH_TIME_FORMAT));let a={employee_id:null===B||void 0===B?void 0:B.id,leave_type:e[v.ic.LEAVE_TYPE],leave_day:e[v.ic.LEAVE_DAY],start_date:(0,m.qr)(q,null===v.ow||void 0===v.ow?void 0:v.ow.DATE_LOCAL_DASH_TIME_FORMAT),end_date:(0,m.qr)(z,null===v.ow||void 0===v.ow?void 0:v.ow.DATE_LOCAL_DASH_TIME_FORMAT),half_leave_type:e[v.ic.HALF_DAY_TYPE]?e[v.ic.HALF_DAY_TYPE]:0,reason:e[v.ic.REASON]||"",leave_balance_date:l||[]};J||(0,d.en)(a).then(e=>{if((null===e||void 0===e?void 0:e.code)==r.NC.SUCCESS){var l;(0,c.k1)(null===e||void 0===e?void 0:e.message),L(null===f.R||void 0===f.R?void 0:f.R.LEAVE_LIST);const a={emp_leave_company:null===(l=v.wz[0])||void 0===l?void 0:l.key};S((0,E.NI)(a)),S((0,E.iC)(!1)),S((0,E.hI)(a))}else S((0,E.iC)(!1)),(0,c.uU)(e.message)})}catch(l){(0,c.uU)("Somthing went wrong")}}),children:(0,x.jsx)("div",{className:"card",children:(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsx)("div",{className:"row justify-content-center",children:(0,x.jsx)("div",{className:"col-auto",children:(0,x.jsx)("div",{className:"card shadow-sm custom-card"})})}),(0,x.jsxs)("div",{className:"row col-12 col-md-12 ",children:[(0,x.jsxs)("div",{className:"col-md-6 ",children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsxs)("div",{className:"col-md-6 col-12 mb-4",children:[(0,x.jsxs)("label",{htmlFor:"employeeName",className:"form-label fw-semibold",children:["Employee Name",(0,x.jsx)("span",{className:"text-danger ms-1"})]}),(0,x.jsx)("div",{className:"input-group border rounded-1",children:(0,x.jsxs)("select",(0,s.A)((0,s.A)({id:"employeeName",className:"form-control ps-2 p-2",autoComplete:"off"},K(v.ic.EMPLOYEE,{required:"Select employee"})),{},{onChange:e=>{te(v.ic.LEAVE_TYPE),te(v.ic.LEAVE_DAY),te(v.ic.HALF_DAY_TYPE),te(v.ic.REASON),te(v.ic.SELECTED_LEAVE_DATES);const l=e.target.value,a=D.find(e=>String(e.id)===String(l));W(a||null),$(null===v.ic||void 0===v.ic?void 0:v.ic.EMPLOYEE_ID,(null===a||void 0===a?void 0:a.employee_id)||"")},children:[(0,x.jsx)("option",{value:"",children:"Select employee"}),(0,m.st)(D)]}))}),(0,x.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(e=ce[v.ic.EMPLOYEE])||void 0===e?void 0:e.message})]}),(0,x.jsxs)("div",{className:"col-md-6 col-12 mb-4",children:[(0,x.jsxs)("label",{htmlFor:"employeeId",className:"form-label fw-semibold",children:["Employee ID",(0,x.jsx)("span",{className:"text-danger ms-1"})]}),(0,x.jsx)("div",{className:"input-group border rounded-1",children:(0,x.jsx)("input",(0,s.A)((0,s.A)({id:"employeeId",name:v.ic.EMPLOYEE_ID,type:"text",className:"form-control ps-2",placeholder:"Enter employee id",autoComplete:"off",disabled:!0},K(v.ic.EMPLOYEE_ID,{required:"Enter employee id"})),{},{onChange:e=>(async(e,l)=>{let a=l;e===v.ic.PANCARD?a=l.replace(v.mZ.ONCHANGE_PANNUMBER_REGEX,""):e===v.ic.ADHARCARD?a=l.replace(v.mZ.ONCHANGE_AADHAR_REGEX,""):e!==v.ic.MOBILE&&e!==v.ic.MONTHLY_SALARY||(a=l.replace(v.mZ.ONCHANGE_MOBILE_REGEX,"")),$(e,a),ee(e),await ie(e)})(v.ic.EMPLOYEE_ID,e.target.value)}))}),(0,x.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(l=ce[v.ic.EMPLOYEE_ID])||void 0===l?void 0:l.message})]})]}),(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsxs)("label",{htmlFor:"payment_status",className:"form-label fw-semibold",children:["Leave Type",(0,x.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,x.jsx)("div",{className:"input-group border rounded-1",children:(0,x.jsx)("select",(0,s.A)((0,s.A)({id:"payment_status",className:"form-control ps-2",autoComplete:"off",style:{fontWeight:"600"}},K(v.ic.LEAVE_TYPE,{required:"Select leave type"})),{},{onChange:e=>{te(v.ic.LEAVE_DAY),te(v.ic.HALF_DAY_TYPE),te(v.ic.REASON),te(v.ic.SELECTED_LEAVE_DATES)},children:(0,m.MT)(v.SB)}))}),(0,x.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(a=ce[v.ic.LEAVE_TYPE])||void 0===a?void 0:a.message})]}),(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsxs)("label",{htmlFor:"payment_status",className:"form-label fw-semibold",children:["Leave Day",(0,x.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,x.jsx)("div",{className:"input-group border rounded-1",children:(0,x.jsx)("select",(0,s.A)((0,s.A)({id:"payment_status",className:"form-control ps-2",autoComplete:"off",style:{fontWeight:"600"}},K(v.ic.LEAVE_DAY,{required:"Select leave day"})),{},{children:(0,m.MT)(v.ZQ)}))}),(0,x.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(_=ce[v.ic.LEAVE_DAY])||void 0===_?void 0:_.message})]}),"half"===ae(v.ic.LEAVE_DAY)&&(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsxs)("label",{htmlFor:"payment_status",className:"form-label fw-semibold",children:["Half Day Type",(0,x.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,x.jsx)("div",{className:"input-group border rounded-1",children:(0,x.jsx)("select",(0,s.A)((0,s.A)({id:"payment_status",className:"form-control ps-2",autoComplete:"off",style:{fontWeight:"600"}},K(v.ic.HALF_DAY_TYPE,{required:"Select leave day"})),{},{children:(0,m.MT)(v.gi)}))}),(0,x.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(j=ce[v.ic.HALF_DAY_TYPE])||void 0===j?void 0:j.message})]})]}),(0,x.jsxs)("div",{className:"col-md-6",children:[(0,x.jsxs)("div",{className:"row mb-4 g-3",children:[" ",(0,x.jsxs)("div",{className:"col-12 col-md-6",children:[(0,x.jsxs)("label",{htmlFor:"dob1",className:"form-label fw-semibold",children:["Start Date ",(0,x.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,x.jsx)(h.A,{id:"dob1",className:"form-control custom-datepicker w-100",format:null===v.ow||void 0===v.ow?void 0:v.ow.DATE_FORMAT,value:q,onChange:e=>G(e),allowClear:!1,picker:"date"})]}),(0,x.jsxs)("div",{className:"col-12 col-md-6",children:[(0,x.jsxs)("label",{htmlFor:"dob2",className:"form-label fw-semibold",children:["End Date ",(0,x.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,x.jsx)(h.A,{id:"dob2",className:"form-control custom-datepicker w-100",format:null===v.ow||void 0===v.ow?void 0:v.ow.DATE_FORMAT,value:z,onChange:e=>U(e),allowClear:!1,picker:"date"})]})]}),ae(v.ic.LEAVE_DAY)&&("casual"==ae(v.ic.LEAVE_TYPE)||"compoff"==ae(v.ic.LEAVE_TYPE))&&(0,x.jsxs)("div",{className:"mb-2",children:[(0,x.jsxs)("label",{htmlFor:"interest_type",className:"form-label fw-semibold",children:["Select Leave Date",(0,x.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,x.jsx)(t.xI,{name:v.ic.SELECTED_LEAVE_DATES,control:se,rules:{required:"Select Leave Date",validate:e=>{const l=q?(0,m.qr)(q,null===v.ow||void 0===v.ow?void 0:v.ow.DATE_LOCAL_DASH_TIME_FORMAT):null,a=z?(0,m.qr)(z,null===v.ow||void 0===v.ow?void 0:v.ow.DATE_LOCAL_DASH_TIME_FORMAT):null;if(l&&a){const s=new Date(l),i=new Date(a);if(isNaN(s.getTime())||isNaN(i.getTime()))return"Invalid start or end date format.";const o=Math.floor((i-s)/864e5)+1;if((null===e||void 0===e?void 0:e.length)!==o)return"Please select ".concat(o," date(s) to match the selected range")}return!0}},render:e=>{let{field:l}=e;const a=ae(v.ic.LEAVE_DAY),s=null===Z||void 0===Z?void 0:Z.some(e=>2===Number(e.is_available)),i=(null===Z||void 0===Z?void 0:Z.filter(e=>"half"==a?s?2==Number(e.is_available):[0,1,2].includes(Number(e.is_available)):[0,1].includes(Number(e.is_available))))||[];return(0,x.jsx)(A.A,{mode:"multiple",style:{width:"100%"},placeholder:"Select Leave Date",value:l.value||[],onChange:e=>{l.onChange(e),$(v.ic.SELECTED_LEAVE_DATES,e),ie(v.ic.SELECTED_LEAVE_DATES)},options:i.map(e=>{var l,a;const s=(null===(l=v.SB.find(l=>l.key==e.leave_type))||void 0===l?void 0:l.value)||e.leave_type,i=(null===(a=v.IK.find(l=>l.key==e.is_available))||void 0===a?void 0:a.value)||e.is_available;return{label:"".concat((0,m.Yq)(e.created_at,null===v.ow||void 0===v.ow?void 0:v.ow.DATE_FORMAT)||"-"," (").concat(s," - ").concat(i,")"),value:e.id||"-",disabled:0==e.is_available}}),optionRender:e=>(0,x.jsx)(N.A,{children:null===e||void 0===e?void 0:e.label}),optionFilterProp:"label",className:"border rounded-1"})}}),(0,x.jsx)("label",{className:"errorc ps-1 pt-1",children:null===ce||void 0===ce||null===(y=ce[v.ic.SELECTED_LEAVE_DATES])||void 0===y?void 0:y.message})]}),(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsxs)("label",{htmlFor:"product_name",className:"form-label fw-semibold",children:["Leave Reason ",(0,x.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,x.jsx)("div",{className:"input-group border rounded-1",children:(0,x.jsx)("textarea",(0,s.A)({className:"form-control ps-2",placeholder:"Enter leave reason",rows:4,autoComplete:"off"},K(v.ic.REASON,(0,m.DX)(v.ic.REASON,(0,c.TM)("Enter leave reason")))))}),(0,x.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(g=ce[v.ic.REASON])||void 0===g?void 0:g.message})]})]}),(0,x.jsxs)("div",{className:"modal-footer justify-content-center mb-3",children:[(0,x.jsx)("button",{type:"button",className:"btn btn-danger m-2",onClick:()=>{L(f.R.LEAVE_LIST)},children:"Cancel"}),(0,x.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})]})})})})})]})]})]})}}}]);