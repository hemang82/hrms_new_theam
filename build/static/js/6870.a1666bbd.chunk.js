"use strict";(self.webpackChunkHRMS_Admin_Panel=self.webpackChunkHRMS_Admin_Panel||[]).push([[6870],{76870:(e,l,s)=>{s.r(l),s.d(l,{default:()=>A});var i=s(89379),a=s(9950),d=s(28429),n=s(9449),t=s(82391),o=s(52610),r=s(79739),c=s(32003),m=s(70591),u=s(82543),v=s(82569),h=s(59091),b=s(61977),x=s(82137),p=s(46004),j=s(4159),N=s.n(j),g=s(90607),f=s(35254),E=s.n(f),y=(s(17687),s(44414));function A(){var e,l,s,j,f;const A=(0,d.Zp)(),T=(0,v.wA)(),k=(0,d.zy)();var S=null===k||void 0===k?void 0:k.state;const{customerList:{data:_}}=(0,v.d4)(e=>e.masterslice),[w,H]=(0,a.useState)(!1),[C,I]=(0,a.useState)(null),{register:O,handleSubmit:D,setValue:M,clearErrors:Y,reset:R,watch:P,control:F,trigger:L,formState:{errors:U}}=(0,n.mN)({defaultValues:{breaks:[{start:null,end:null}]}}),{fields:q,append:z,remove:V}=(0,n.jz)({control:F,name:"breaks"});(0,a.useEffect)(()=>{var e;const l={emp_leave_company:null===(e=u.wz[0])||void 0===e?void 0:e.key};0===(null===_||void 0===_?void 0:_.length)&&T((0,h.hI)(l))},[]),(0,a.useEffect)(()=>{if(S&&(null===_||void 0===_?void 0:_.length)>0){var e,l,s;T((0,h.iC)(!0));const i=null===S||void 0===S||null===(e=S.breaks)||void 0===e?void 0:e.map(e=>({start:e.start?N()("".concat(e.start),"HH:mm:ss"):null,end:e.end?N()("".concat(e.end),"HH:mm:ss"):null}));M("breaks",i);const a=(null===_||void 0===_?void 0:_.find(e=>e.id==(null===S||void 0===S?void 0:S.emp_id)))||null;I(a||null),M(null===u.ic||void 0===u.ic?void 0:u.ic.EMPLOYEE_ID,null===S||void 0===S?void 0:S.emp_id),M("dob1",null!==S&&void 0!==S&&S.date?N()(null===S||void 0===S?void 0:S.date).format("DD-MM-YYYY"):null),M("checkIn",null!==S&&void 0!==S&&null!==(l=S.checkInTimes)&&void 0!==l&&l[0]?N()("".concat(S.date," ").concat(S.checkInTimes[0]),"YYYY-MM-DD HH:mm:ss"):null),M("checkOut",null!==S&&void 0!==S&&null!==(s=S.checkOutTimes)&&void 0!==s&&s[0]?N()("".concat(S.date," ").concat(S.checkOutTimes[0]),"YYYY-MM-DD HH:mm:ss"):null),T((0,h.iC)(!1))}console.log("userData?.departmentuserData?.department",null===S||void 0===S?void 0:S.department)},[S,_]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(b.default,{isActive:w,message:"Please Wait"}),(0,y.jsxs)("div",{className:"container-fluid mw-100",children:[(0,y.jsx)(r.A,{title:S?"Edit Ticket":"Add Ticket",header:"Ticket List",subHeaderOnlyView:S?"Edit Ticket":"Add Ticket"}),(0,y.jsx)("div",{className:"row",children:(0,y.jsx)("div",{className:"col-12 justify-content-center",children:(0,y.jsx)("div",{className:"row justify-content-center ",children:(0,y.jsx)("form",{onSubmit:D(async e=>{try{var l;T((0,h.iC)(!0));let s={employee_id:null===C||void 0===C?void 0:C.id,date:(0,m.qr)(null===e||void 0===e?void 0:e.dob1,null===u.ow||void 0===u.ow?void 0:u.ow.DATE_DASH_TIME_FORMAT),check_in_time:null!==e&&void 0!==e&&e.checkIn?N()(e.checkIn).format("HH:mm"):null,check_out_time:null!==e&&void 0!==e&&e.checkOut?N()(e.checkOut).format("HH:mm"):null,breaks:Array.isArray(null===e||void 0===e?void 0:e.breaks)&&(null===e||void 0===e||null===(l=e.breaks)||void 0===l?void 0:l.length)>0?e.breaks.map(e=>({start:null!==e&&void 0!==e&&e.start?N()(e.start,null===u.Hg||void 0===u.Hg?void 0:u.Hg.TIME_WITH_SECONDS_12_HOUR_FORMAT).format("HH:mm"):null,end:null!==e&&void 0!==e&&e.end?N()(e.end,null===u.Hg||void 0===u.Hg?void 0:u.Hg.TIME_WITH_SECONDS_12_HOUR_FORMAT).format("HH:mm"):null})):[],lat:"0.000",log:"0.000",location_id:"TRACEWAVE"};S||(0,o.jY)(s).then(e=>{(null===e||void 0===e?void 0:e.code)==c.NC.SUCCESS?((0,t.k1)(null===e||void 0===e?void 0:e.message),A(null===g.R||void 0===g.R?void 0:g.R.ATTENDANCE_LIST),T((0,h.iC)(!1))):((0,t.uU)(e.message),T((0,h.iC)(!1)))})}catch(s){(0,t.uU)("Somthing went wrong"),T((0,h.iC)(!1))}}),children:(0,y.jsx)("div",{className:"card",children:(0,y.jsx)("div",{className:"card-body",children:(0,y.jsxs)("div",{className:"row col-12 col-md-12 ",children:[(0,y.jsxs)("div",{className:"col-md-6",children:[(0,y.jsxs)("div",{className:"mb-4",children:[(0,y.jsxs)("label",{htmlFor:"gender1",className:"form-label fw-semibold",children:["Select Project",(0,y.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,y.jsx)(n.xI,{name:u.ic.PROJECT,control:F,rules:{required:"Select at least one project"},render:e=>{let{field:l}=e;return(0,y.jsx)(x.A,{style:{width:"100%",height:"40px"},placeholder:"Select project",value:l.value||[],onChange:e=>{l.onChange(e),M(u.ic.PROJECT,e)},options:(null===u.BX||void 0===u.BX?void 0:u.BX.map(e=>({label:e.name,value:e.id})))||[],optionRender:e=>(0,y.jsx)(p.A,{children:null===e||void 0===e?void 0:e.label}),className:"border rounded-1"})}}),(0,y.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(e=U[u.ic.EMPLOYEE])||void 0===e?void 0:e.message})]}),(0,y.jsxs)("div",{className:"mb-4",children:[(0,y.jsxs)("label",{htmlFor:"lastname",className:"form-label fw-semibold",children:["Title ",(0,y.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,y.jsx)("div",{className:"input-group border rounded-1",children:(0,y.jsx)("input",(0,i.A)({type:"text",className:"form-control ps-2",placeholder:"Enter title",autoComplete:"nope"},O(u.ic.TITLE,(0,m.DX)(u.ic.TITLE,"Enter title"))))}),(0,y.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(l=U[u.ic.TITLE])||void 0===l?void 0:l.message})]}),(0,y.jsxs)("div",{className:"mb-4",children:[(0,y.jsxs)("label",{htmlFor:"leave_reason",className:"form-label fw-semibold",children:["Description ",(0,y.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,y.jsx)("div",{className:" border rounded-1",children:(0,y.jsx)(n.xI,{name:u.ic.DESCRIPTION,control:F,rules:{required:"Enter description"},render:e=>{let{field:l}=e;return(0,y.jsx)(E(),(0,i.A)((0,i.A)({},l),{},{theme:"snow",placeholder:"Enter description",className:"custom-quill w-100",style:{minHeight:"200px"}}))}})}),(0,y.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(s=U[u.ic.DESCRIPTION])||void 0===s?void 0:s.message})]})]}),(0,y.jsxs)("div",{className:"col-md-6",children:[(0,y.jsxs)("div",{className:"mb-4",children:[(0,y.jsxs)("label",{htmlFor:"gender1",className:"form-label fw-semibold",children:["Select Task",(0,y.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,y.jsx)(n.xI,{name:u.ic.TASK,control:F,rules:{required:"Select task"},render:e=>{let{field:l}=e;return(0,y.jsx)(x.A,{style:{width:"100%",height:"40px"},placeholder:"Select task",value:l.value||[],onChange:e=>{l.onChange(e),M(u.ic.TASK,e)},options:(null===u.Pr||void 0===u.Pr?void 0:u.Pr.map(e=>({label:e.name,value:e.id})))||[],optionRender:e=>(0,y.jsx)(p.A,{children:null===e||void 0===e?void 0:e.label}),className:"border rounded-1"})}}),(0,y.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(j=U[u.ic.TASK])||void 0===j?void 0:j.message})]}),(0,y.jsxs)("div",{className:"mb-4",children:[(0,y.jsxs)("label",{htmlFor:"gender1",className:"form-label fw-semibold",children:["Select Employee",(0,y.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,y.jsx)(n.xI,{name:u.ic.EMPLOYEE,control:F,rules:{required:"Select at least one employee"},render:e=>{let{field:l}=e;return(0,y.jsx)(x.A,{style:{width:"100%",height:"40px"},placeholder:"Select employee",value:l.value||[],onChange:e=>{l.onChange(e),M(u.ic.EMPLOYEE,e)},options:(null===_||void 0===_?void 0:_.map(e=>({label:e.name,value:e.id})))||[],optionRender:e=>(0,y.jsx)(p.A,{children:null===e||void 0===e?void 0:e.label}),className:"border rounded-1"})}}),(0,y.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(f=U[u.ic.EMPLOYEE])||void 0===f?void 0:f.message})]})]}),(0,y.jsx)("div",{className:"modal-footer justify-content-center mb-3",children:(0,y.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})})})})})})})]})]})}},79739:(e,l,s)=>{s.d(l,{A:()=>r});s(9950);var i=s(28429),a=s(42074),d=s(32003),n=s(82569),t=s(59091),o=(s(90607),s(44414));function r(e){let{title:l,header:s,subHeader:r,subHeaderOnlyView:c}=e;const{slidebarToggle:m}=(0,n.d4)(e=>e.masterslice),u=(0,i.zy)(),v=(0,n.wA)(),h=((0,i.Zp)(),null===u||void 0===u?void 0:u.pathname);let b=null===h||void 0===h?void 0:h.split("/");var x=JSON.parse(localStorage.getItem(d.Ay.AUTH_KEY));return console.log("userDetailsuserDetails",x),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"card bg-light-info shadow-none border-0 position-relative overflow-hidden make-header",children:(0,o.jsx)("div",{className:"card-body px-4 py-3",children:(0,o.jsxs)("div",{className:"row align-items-center",children:[(0,o.jsxs)("div",{className:"col-12 col-md-9 d-flex align-items-center gap-3 mb-3 mb-md-0",children:[(0,o.jsx)("button",{type:"button",className:"btn btn-light d-flex align-items-center justify-content-center p-2 shadow-sm rounded-circle",onClick:()=>{v((0,t.ST)(!m)),(()=>{const e=document.querySelector("body");if(e&&e.setAttribute("data-sidebartype",m?"mini-sidebar":"full"),window.innerWidth<=992){const e=document.getElementById("left_side_menu_id");e&&(e.style.display=m?"none":"block")}})()},children:(0,o.jsx)("i",{className:"ti ti-menu-2 fs-5 text-custom-theam"})}),(0,o.jsx)("nav",{"aria-label":"breadcrumb",className:"ms-2",children:(0,o.jsxs)("ol",{className:"breadcrumb mb-0",children:[(0,o.jsx)("li",{className:"breadcrumb-item",children:(0,o.jsx)(a.N_,{to:"/dashboard",className:"text-decoration-none",children:"Dashboard"})}),(0,o.jsx)("li",{className:"breadcrumb-item",children:(0,o.jsx)(a.N_,{to:"/".concat(null===b||void 0===b?void 0:b[1]),className:"text-decoration-none",children:s})}),r&&(0,o.jsx)("li",{className:"breadcrumb-item",children:(0,o.jsx)(a.N_,{to:h,className:"text-decoration-none",children:r})}),c&&(0,o.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:c})]})})]}),(0,o.jsxs)("div",{className:"col-12 col-md-3 d-flex justify-content-md-end justify-content-center ",children:[(0,o.jsx)("img",{src:(null===x||void 0===x?void 0:x.profile_image)||(null===d.Ay||void 0===d.Ay?void 0:d.Ay.DEFAULT_IMAGE),alt:"User Avatar",className:"rounded-circle me-2 d-none d-sm-block",style:{width:"40px",height:"40px",objectFit:"cover"}}),(0,o.jsxs)("div",{className:"d-none d-sm-block text-end",children:[(null===x||void 0===x?void 0:x.email)&&(0,o.jsx)("div",{className:"fw-semibold mb-0 ",style:{fontSize:"0.9rem"},children:null===x||void 0===x?void 0:x.email}),(null===x||void 0===x?void 0:x.role)&&(0,o.jsx)("div",{className:"fw-semibold mb-0 text-capitalize text-custom-theam",style:{fontSize:"0.9rem"},children:1==(null===x||void 0===x?void 0:x.role)?"Admin":"Sub Admin"})]})]})]})})})})}}}]);