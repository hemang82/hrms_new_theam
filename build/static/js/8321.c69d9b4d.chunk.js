"use strict";(self.webpackChunkHRMS_Admin_Panel=self.webpackChunkHRMS_Admin_Panel||[]).push([[8321],{48321:(e,l,s)=>{s.r(l),s.d(l,{default:()=>A});var a=s(89379),i=s(9950),d=(s(4695),s(28429)),o=s(9449),c=(s(20404),s(12815),s(97514),s(82391)),t=s(52610),n=s(79739),r=(s(40078),s(34263),s(32003)),m=(s(25825),s(70591)),v=s(82543),u=s(82569),h=s(59091),p=(s(77923),s(98631),s(61977)),N=s(60984),E=s(4159),x=s.n(E),b=s(90607),j=s(44414);function A(){var e,l,s,E,A,f;const _=(0,d.Zp)(),y=(0,u.wA)(),g=(0,d.zy)(),{customerList:{data:w}}=(0,u.d4)(e=>e.masterslice),[S,L]=(0,i.useState)(null),[C,D]=(0,i.useState)(""),[R,T]=(0,i.useState)(null),[M,O]=(0,i.useState)(""),[Y,P]=(0,i.useState)(!1),[H,I]=(0,i.useState)(!1),[F,k]=(0,i.useState)(x()()),[V,G]=(0,i.useState)(x()()),[q,U]=(0,i.useState)(null);var B=null===g||void 0===g?void 0:g.state;const{register:W,handleSubmit:Z,setValue:X,clearErrors:z,reset:J,watch:K,control:Q,trigger:$,formState:{errors:ee}}=(0,o.mN)();(0,i.useEffect)(()=>{var e;const l={emp_leave_company:null===(e=v.wz[0])||void 0===e?void 0:e.key};0===(null===w||void 0===w?void 0:w.length)&&y((0,h.hI)(l))},[]),(0,i.useEffect)(()=>{B&&(y((0,h.iC)(!0)),(0,t.JG)({employee_id:null===B||void 0===B?void 0:B.id.toString()}).then(e=>{if((null===e||void 0===e?void 0:e.code)==r.NC.SUCCESS){let l=null===e||void 0===e?void 0:e.data;X(null===v.ic||void 0===v.ic?void 0:v.ic.NAME,null===l||void 0===l?void 0:l.name),X(null===v.ic||void 0===v.ic?void 0:v.ic.EMAIL,null===l||void 0===l?void 0:l.email),X(null===v.ic||void 0===v.ic?void 0:v.ic.MOBILE,null===l||void 0===l?void 0:l.phone_number),X(null===v.ic||void 0===v.ic?void 0:v.ic.CURRENT_ADDRESH,null===l||void 0===l?void 0:l.location),X(null===v.ic||void 0===v.ic?void 0:v.ic.GENDER,(null===l||void 0===l?void 0:l.gender)||"M"),k(null!==l&&void 0!==l&&l.birth_date?x()(l.birth_date):null),X(null===v.ic||void 0===v.ic?void 0:v.ic.PASSWORD,null===l||void 0===l?void 0:l.password),X(null===v.ic||void 0===v.ic?void 0:v.ic.MONTHLY_SALARY,null===l||void 0===l?void 0:l.salary_monthly),X(null===v.ic||void 0===v.ic?void 0:v.ic.SENIOR_NAME,null===l||void 0===l?void 0:l.senior_name),X(null===v.ic||void 0===v.ic?void 0:v.ic.DESIGNATION,null===l||void 0===l?void 0:l.designation),G(null!==l&&void 0!==l&&l.joining_date?x()(l.joining_date):null),y((0,h.iC)(!1))}})),console.log("userData?.departmentuserData?.department",null===B||void 0===B?void 0:B.department)},[B]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(p.default,{isActive:Y,message:"Please Wait"}),(0,j.jsxs)("div",{className:"container-fluid mw-100",children:[(0,j.jsx)(n.A,{title:B?"Edit Employee":"Add Employee",header:"Employee List",subHeaderOnlyView:B?"Edit Employee":"Add Employee"}),(0,j.jsxs)("div",{className:"row",children:[q&&(0,j.jsx)("div",{className:"col-12 justify-content-center",children:(0,j.jsx)("div",{className:"card  ",children:(0,j.jsxs)("div",{className:"p-3 row_2",children:[(0,j.jsx)("div",{className:"py-3 border-bottom chat-meta-user d-flex align-items-center justify-content-between mb-4",children:(0,j.jsx)("h5",{className:"text-secondary mb-0 fw-semibold fs-4",children:"Employee Leave Details"})}),(0,j.jsx)("div",{className:"row",children:[{label:"Casual Leave",value:null===q||void 0===q?void 0:q.casual},{label:"Compoff Leave",value:null===q||void 0===q?void 0:q.compoff},{label:"Total Leave",value:(Number(null===q||void 0===q?void 0:q.casual)||0)+(Number(null===q||void 0===q?void 0:q.compoff)||0)}].map((e,l)=>(0,j.jsx)("div",{className:"col-12 col-sm-6 col-md-3 col-lg-4 ",children:(0,j.jsx)("div",{className:"card border-1 zoom-in them-light shadow-sm",children:(0,j.jsxs)("div",{className:"p-2 text-center",children:[(0,j.jsx)("p",{className:"fw-semibold fs-5 text-dark ",children:e.label}),(0,j.jsx)("h5",{className:"fw-semibold text-dark mb-0 fs-5",children:e.value||"-"})]})},l)}))})]})})}),(0,j.jsx)("div",{className:"col-12 justify-content-center",children:(0,j.jsx)("div",{className:"row justify-content-center ",children:(0,j.jsx)("form",{onSubmit:Z(async e=>{try{y((0,h.iC)(!0));let l={employee_id:null===q||void 0===q?void 0:q.id,leave_type:e[v.ic.LEAVE_TYPE],leave_day:e[v.ic.LEAVE_DAY],start_date:(0,m.qr)(F,null===v.ow||void 0===v.ow?void 0:v.ow.DATE_LOCAL_DASH_TIME_FORMAT),end_date:(0,m.qr)(V,null===v.ow||void 0===v.ow?void 0:v.ow.DATE_LOCAL_DASH_TIME_FORMAT),half_leave_type:e[v.ic.HALF_DAY_TYPE]?e[v.ic.HALF_DAY_TYPE]:0,reason:e[v.ic.REASON]||""};B||(0,t.K2)(l).then(e=>{(null===e||void 0===e?void 0:e.code)==r.NC.SUCCESS?((0,c.k1)(null===e||void 0===e?void 0:e.message),_(null===b.R||void 0===b.R?void 0:b.R.LEAVE_LIST),y((0,h.iC)(!1))):(y((0,h.iC)(!1)),(0,c.uU)(e.message))})}catch(l){(0,c.uU)("Somthing went wrong")}}),children:(0,j.jsx)("div",{className:"card",children:(0,j.jsxs)("div",{className:"card-body",children:[(0,j.jsx)("div",{className:"row justify-content-center",children:(0,j.jsx)("div",{className:"col-auto",children:(0,j.jsx)("div",{className:"card shadow-sm custom-card"})})}),(0,j.jsxs)("div",{className:"row col-12 col-md-12 ",children:[(0,j.jsxs)("div",{className:"col-md-6 ",children:[(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsxs)("label",{htmlFor:"gender1",className:"form-label fw-semibold",children:["Select Employee",(0,j.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,j.jsx)("div",{className:"input-group border rounded-1",children:(0,j.jsxs)("select",(0,a.A)((0,a.A)({id:"gender1",className:"form-control ps-2 p-2",autoComplete:"nope"},W(v.ic.EMPLOYEE,{required:"Select employee"})),{},{onChange:e=>{const l=e.target.value,s=w.find(e=>String(e.id)===String(l));U(s||null),X(null===v.ic||void 0===v.ic?void 0:v.ic.EMPLOYEE_ID,s.employee_id)},children:[(0,j.jsx)("option",{value:"",children:"Select employee"}),(0,m.st)(w)]}))}),(0,j.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(e=ee[v.ic.EMPLOYEE])||void 0===e?void 0:e.message})]}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsxs)("label",{htmlFor:"payment_status",className:"form-label fw-semibold",children:["Leave Type",(0,j.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,j.jsx)("div",{className:"input-group border rounded-1",children:(0,j.jsx)("select",(0,a.A)((0,a.A)({id:"payment_status",className:"form-control ps-2",autoComplete:"off",style:{fontWeight:"600"}},W(v.ic.LEAVE_TYPE,{required:"Select leave type"})),{},{children:(0,m.MT)(v.SB)}))}),(0,j.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(l=ee[v.ic.LEAVE_TYPE])||void 0===l?void 0:l.message})]}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsxs)("label",{htmlFor:"payment_status",className:"form-label fw-semibold",children:["Leave Day",(0,j.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,j.jsx)("div",{className:"input-group border rounded-1",children:(0,j.jsx)("select",(0,a.A)((0,a.A)({id:"payment_status",className:"form-control ps-2",autoComplete:"off",style:{fontWeight:"600"}},W(v.ic.LEAVE_DAY,{required:"Select leave day"})),{},{children:(0,m.MT)(v.ZQ)}))}),(0,j.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(s=ee[v.ic.LEAVE_DAY])||void 0===s?void 0:s.message})]}),"half"===K(v.ic.LEAVE_DAY)&&(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsxs)("label",{htmlFor:"payment_status",className:"form-label fw-semibold",children:["Half Day Type",(0,j.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,j.jsx)("div",{className:"input-group border rounded-1",children:(0,j.jsx)("select",(0,a.A)((0,a.A)({id:"payment_status",className:"form-control ps-2",autoComplete:"off",style:{fontWeight:"600"}},W(v.ic.HALF_DAY_TYPE,{required:"Select leave day"})),{},{children:(0,m.MT)(v.gi)}))}),(0,j.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(E=ee[v.ic.HALF_DAY_TYPE])||void 0===E?void 0:E.message})]})]}),(0,j.jsxs)("div",{className:"col-md-6",children:[(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsxs)("label",{htmlFor:"lastname",className:"form-label fw-semibold",children:["Employee Id",(0,j.jsx)("span",{className:"text-danger ms-1"})]}),(0,j.jsx)("div",{className:"input-group border rounded-1",children:(0,j.jsx)("input",(0,a.A)((0,a.A)({name:v.ic.EMPLOYEE_ID,type:"text",className:"form-control ps-2",placeholder:"Enter employee id",autoComplete:"nope",disabled:!0},W(v.ic.EMPLOYEE_ID,{required:"Enter employee id"})),{},{onChange:e=>(async(e,l)=>{let s=l;e===v.ic.PANCARD?s=l.replace(v.mZ.ONCHANGE_PANNUMBER_REGEX,""):e===v.ic.ADHARCARD?s=l.replace(v.mZ.ONCHANGE_AADHAR_REGEX,""):e!==v.ic.MOBILE&&e!==v.ic.MONTHLY_SALARY||(s=l.replace(v.mZ.ONCHANGE_MOBILE_REGEX,"")),X(e,s),z(e),await $(e)})(v.ic.EMPLOYEE_ID,e.target.value)}))}),(0,j.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(A=ee[v.ic.EMPLOYEE_ID])||void 0===A?void 0:A.message})]}),(0,j.jsxs)("div",{className:"row mb-4 g-3",children:[" ",(0,j.jsxs)("div",{className:"col-12 col-md-6",children:[(0,j.jsxs)("label",{htmlFor:"dob1",className:"form-label fw-semibold",children:["Start Date ",(0,j.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,j.jsx)(N.A,{id:"dob1",className:"form-control custom-datepicker w-100",format:null===v.ow||void 0===v.ow?void 0:v.ow.DATE_FORMAT,value:F,onChange:e=>k(e),allowClear:!1,picker:"date"})]}),(0,j.jsxs)("div",{className:"col-12 col-md-6",children:[(0,j.jsxs)("label",{htmlFor:"dob2",className:"form-label fw-semibold",children:["End Date ",(0,j.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,j.jsx)(N.A,{id:"dob2",className:"form-control custom-datepicker w-100",format:null===v.ow||void 0===v.ow?void 0:v.ow.DATE_FORMAT,value:V,onChange:e=>G(e),allowClear:!1,picker:"date"})]})]}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsxs)("label",{htmlFor:"product_name",className:"form-label fw-semibold",children:["Reason ",(0,j.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,j.jsx)("div",{className:"input-group border rounded-1",children:(0,j.jsx)("textarea",(0,a.A)({className:"form-control ps-2",placeholder:"Enter reason",autoComplete:"off",rows:3},W(v.ic.REASON,(0,m.DX)(v.ic.REASON,(0,c.TM)("Enter reason")))))}),(0,j.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(f=ee[v.ic.REASON])||void 0===f?void 0:f.message})]})]}),(0,j.jsxs)("div",{className:"modal-footer justify-content-center mb-3",children:[B?(0,j.jsx)("button",{type:"button",className:"btn btn-danger m-2",onClick:()=>{_(b.R.LEAVE_LIST)},children:"Cancel"}):(0,j.jsx)("button",{type:"button",className:"btn btn-danger m-2",onClick:()=>{J(),T(""),O(""),D(""),L("")},children:"Reset"}),(0,j.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})]})})})})})]})]})]})}}}]);