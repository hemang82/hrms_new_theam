"use strict";(self.webpackChunkHRMS_Admin_Panel=self.webpackChunkHRMS_Admin_Panel||[]).push([[6870],{46004:(e,l,i)=>{i.d(l,{A:()=>b});var s=i(9950),t=i(48738),n=i.n(t),a=i(50604);function d(e){return["small","middle","large"].includes(e)}function o(e){return!!e&&("number"===typeof e&&!Number.isNaN(e))}var r=i(5741),c=i(93457);const m=s.createContext({latestIndex:0}),u=m.Provider,v=e=>{let{className:l,index:i,children:t,split:n,style:a}=e;const{latestIndex:d}=s.useContext(m);return null===t||void 0===t?null:s.createElement(s.Fragment,null,s.createElement("div",{className:l,style:a},t),i<d&&n&&s.createElement("span",{className:"".concat(l,"-split")},n))};var h=i(44655),p=function(e,l){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&l.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var t=0;for(s=Object.getOwnPropertySymbols(e);t<s.length;t++)l.indexOf(s[t])<0&&Object.prototype.propertyIsEnumerable.call(e,s[t])&&(i[s[t]]=e[s[t]])}return i};const x=s.forwardRef((e,l)=>{var i;const{getPrefixCls:t,direction:c,size:m,className:x,style:b,classNames:j,styles:g}=(0,r.TP)("space"),{size:N=(null!==m&&void 0!==m?m:"small"),align:f,className:y,rootClassName:E,children:S,direction:T="horizontal",prefixCls:C,split:w,style:A,wrap:O=!1,classNames:P,styles:k}=e,I=p(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[_,R]=Array.isArray(N)?N:[N,N],L=d(R),F=d(_),z=o(R),M=o(_),D=(0,a.A)(S,{keepEmpty:!0}),J=void 0===f&&"horizontal"===T?"center":f,H=t("space",C),[K,U,Y]=(0,h.A)(H),q=n()(H,x,U,"".concat(H,"-").concat(T),{["".concat(H,"-rtl")]:"rtl"===c,["".concat(H,"-align-").concat(J)]:J,["".concat(H,"-gap-row-").concat(R)]:L,["".concat(H,"-gap-col-").concat(_)]:F},y,E,Y),V=n()("".concat(H,"-item"),null!==(i=null===P||void 0===P?void 0:P.item)&&void 0!==i?i:j.item);let G=0;const W=D.map((e,l)=>{var i;null!==e&&void 0!==e&&(G=l);const t=(null===e||void 0===e?void 0:e.key)||"".concat(V,"-").concat(l);return s.createElement(v,{className:V,key:t,index:l,split:w,style:null!==(i=null===k||void 0===k?void 0:k.item)&&void 0!==i?i:g.item},e)}),X=s.useMemo(()=>({latestIndex:G}),[G]);if(0===D.length)return null;const Z={};return O&&(Z.flexWrap="wrap"),!F&&M&&(Z.columnGap=_),!L&&z&&(Z.rowGap=R),K(s.createElement("div",Object.assign({ref:l,className:q,style:Object.assign(Object.assign(Object.assign({},Z),b),A)},I),s.createElement(u,{value:X},W)))});x.Compact=c.Ay;const b=x},76870:(e,l,i)=>{i.r(l),i.d(l,{default:()=>y});var s=i(89379),t=i(9950),n=i(28429),a=i(9449),d=i(82391),o=i(52610),r=i(79739),c=i(32003),m=i(70591),u=i(82543),v=i(82569),h=i(59091),p=i(61977),x=i(82137),b=i(46004),j=(i(4159),i(90607)),g=i(35254),N=i.n(g),f=(i(17687),i(44414));function y(){var e,l,i,g,y;const E=(0,n.Zp)(),S=(0,v.wA)(),T=(0,n.zy)();var C=null===T||void 0===T?void 0:T.state;const{assignTaskList:{data:w}}=(0,v.d4)(e=>e.masterslice),{projectList:{data:A}}=(0,v.d4)(e=>e.masterslice),{customerList:{data:O}}=(0,v.d4)(e=>e.masterslice),[P,k]=(0,t.useState)(!1),[I,_]=(0,t.useState)(null),[R,L]=(0,t.useState)({}),{register:F,handleSubmit:z,setValue:M,clearErrors:D,reset:J,watch:H,control:K,trigger:U,formState:{errors:Y}}=(0,a.mN)({defaultValues:{breaks:[{start:null,end:null}]}});(0,t.useEffect)(()=>{var e;const l={emp_leave_company:null===(e=u.wz[0])||void 0===e?void 0:e.key};0===(null===O||void 0===O?void 0:O.length)&&S((0,h.hI)(l)),0===(null===A||void 0===A?void 0:A.length)&&S((0,h.EF)({})),0===(null===w||void 0===w?void 0:w.length)&&S((0,h.nj)({}))},[]),(0,t.useEffect)(()=>{if(C&&(null===O||void 0===O?void 0:O.length)>0&&(null===w||void 0===w?void 0:w.length)>0){var e,l,i;M(u.ic.PROJECT,(null===C||void 0===C?void 0:C.project_id)||null),M(u.ic.TITLE,(null===C||void 0===C?void 0:C.title)||null),H(u.ic.PROJECT)&&M(u.ic.TASK,(null===C||void 0===C||null===(e=C.task_id)||void 0===e?void 0:e.toString())||null),M(u.ic.DESCRIPTION,(null===C||void 0===C?void 0:C.description)||null);const t=null===A||void 0===A?void 0:A.filter(e=>e.id==(null===C||void 0===C?void 0:C.project_id));if(L((null===t||void 0===t?void 0:t.length)>0?null===(l=t[0])||void 0===l||null===(i=l.team)||void 0===i?void 0:i.split(",").map(e=>e.trim()):[]),(null===t||void 0===t?void 0:t.length)>0){var s;const e=null!==C&&void 0!==C&&C.assign_to?null===C||void 0===C||null===(s=C.assign_to)||void 0===s?void 0:s.split(",").map(String):[];M(u.ic.EMPLOYEE,e||[])}S((0,h.iC)(!1))}},[C,O]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.default,{isActive:P,message:"Please Wait"}),(0,f.jsxs)("div",{className:"container-fluid mw-100",children:[(0,f.jsx)(r.A,{title:C?"Edit Ticket":"Add Ticket",header:"Ticket List",subHeaderOnlyView:C?"Edit Ticket":"Add Ticket"}),(0,f.jsx)("div",{className:"row",children:(0,f.jsx)("div",{className:"col-12 justify-content-center",children:(0,f.jsx)("div",{className:"row justify-content-center ",children:(0,f.jsx)("form",{onSubmit:z(async e=>{try{var l,i;S((0,h.iC)(!0));let t={project_id:e[u.ic.PROJECT],task_id:e[u.ic.TASK],title:e[u.ic.TITLE],description:e[u.ic.DESCRIPTION],assign_to:1==(null===(l=e[u.ic.EMPLOYEE])||void 0===l?void 0:l.length)?null===(i=e[u.ic.EMPLOYEE][0])||void 0===i?void 0:i.toString():e[u.ic.EMPLOYEE],status:""};var s;if(C)t.ticket_id=null===C||void 0===C||null===(s=C.id)||void 0===s?void 0:s.toString(),(0,o.Xx)(t).then(e=>{(null===e||void 0===e?void 0:e.code)==c.NC.SUCCESS?((0,d.k1)(null===e||void 0===e?void 0:e.message),S((0,h.H1)({})),E(null===j.R||void 0===j.R?void 0:j.R.LIST_TICKET)):(0,d.uU)(e.message)});else(0,o.ie)(t).then(e=>{(null===e||void 0===e?void 0:e.code)==c.NC.SUCCESS?((0,d.k1)(null===e||void 0===e?void 0:e.message),E(null===j.R||void 0===j.R?void 0:j.R.LIST_TICKET),S((0,h.H1)({})),S((0,h.iC)(!1))):((0,d.uU)(e.message),S((0,h.iC)(!1)))})}catch(t){(0,d.uU)("Somthing went wrong"),S((0,h.iC)(!1))}}),children:(0,f.jsx)("div",{className:"card",children:(0,f.jsx)("div",{className:"card-body",children:(0,f.jsxs)("div",{className:"row col-12 col-md-12 ",children:[(0,f.jsxs)("div",{className:"col-md-6",children:[(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsxs)("label",{htmlFor:"gender1",className:"form-label fw-semibold",children:["Select Project",(0,f.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,f.jsx)(a.xI,{name:u.ic.PROJECT,control:K,rules:{required:"Select at least one project"},render:e=>{let{field:l}=e;return(0,f.jsx)(x.A,{style:{width:"100%",height:"40px"},placeholder:"Select project",value:l.value||[],onChange:e=>{var i,s;l.onChange(e),M(u.ic.PROJECT,e);const t=null===A||void 0===A?void 0:A.filter(l=>l.id==e);L((null===t||void 0===t?void 0:t.length)>0?null===(i=t[0])||void 0===i||null===(s=i.team)||void 0===s?void 0:s.split(",").map(e=>e.trim()):[])},options:(null===A||void 0===A?void 0:A.map(e=>({label:e.name,value:e.id})))||[],disabled:!!C,optionRender:e=>(0,f.jsx)(b.A,{children:null===e||void 0===e?void 0:e.label}),className:"border rounded-1"})}}),(0,f.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(e=Y[u.ic.PROJECT])||void 0===e?void 0:e.message})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsxs)("label",{htmlFor:"lastname",className:"form-label fw-semibold",children:["Ticket Name ",(0,f.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,f.jsx)("div",{className:"input-group border rounded-1",children:(0,f.jsx)("input",(0,s.A)({type:"text",className:"form-control ps-2",placeholder:"Enter title",autoComplete:"nope"},F(u.ic.TITLE,(0,m.DX)(u.ic.TITLE,"Enter title"))))}),(0,f.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(l=Y[u.ic.TITLE])||void 0===l?void 0:l.message})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsxs)("label",{htmlFor:"leave_reason",className:"form-label fw-semibold",children:["Description ",(0,f.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,f.jsx)("div",{className:" border rounded-1",children:(0,f.jsx)(a.xI,{name:u.ic.DESCRIPTION,control:K,rules:{required:"Enter description"},render:e=>{let{field:l}=e;return(0,f.jsx)(N(),(0,s.A)((0,s.A)({},l),{},{theme:"snow",placeholder:"Enter description",className:"custom-quill w-100",style:{minHeight:"200px"}}))}})}),(0,f.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(i=Y[u.ic.DESCRIPTION])||void 0===i?void 0:i.message})]})]}),(0,f.jsxs)("div",{className:"col-md-6",children:[(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsxs)("label",{htmlFor:"gender1",className:"form-label fw-semibold",children:["Select Task",(0,f.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,f.jsx)(a.xI,{name:u.ic.TASK,control:K,rules:{required:"Select task"},render:e=>{let{field:l}=e;return(0,f.jsx)(x.A,{style:{width:"100%",height:"40px"},placeholder:"Select task",value:l.value||[],onChange:e=>{l.onChange(e),M(u.ic.TASK,e)},disabled:!!C,options:H(u.ic.PROJECT)&&(null===w||void 0===w?void 0:w.filter(e=>H(u.ic.PROJECT)?H(u.ic.PROJECT)==e.project_id:[""]).map(e=>({label:e.title,value:String(e.id)})))||[],optionRender:e=>(0,f.jsx)(b.A,{children:null===e||void 0===e?void 0:e.label}),className:"border rounded-1",optionFilterProp:"label"})}}),(0,f.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(g=Y[u.ic.TASK])||void 0===g?void 0:g.message})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsxs)("label",{htmlFor:"gender1",className:"form-label fw-semibold",children:["Select Employee",(0,f.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,f.jsx)(a.xI,{name:u.ic.EMPLOYEE,control:K,rules:{required:"Select at least one employee"},render:e=>{let{field:l}=e;return(0,f.jsx)(x.A,{mode:"multiple",style:{width:"100%",height:"40px"},placeholder:"Select employee",value:l.value||[],onChange:e=>{l.onChange(e),M(u.ic.EMPLOYEE,e)},options:(null===O||void 0===O?void 0:O.filter(e=>(null===R||void 0===R?void 0:R.length)>0&&(null===R||void 0===R?void 0:R.includes(String(e.id)))).map(e=>({label:e.name,value:String(e.id)})))||[],optionRender:e=>(0,f.jsx)(b.A,{children:null===e||void 0===e?void 0:e.label}),className:"border rounded-1",optionFilterProp:"label"})}}),(0,f.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(y=Y[u.ic.EMPLOYEE])||void 0===y?void 0:y.message})]})]}),(0,f.jsxs)("div",{className:"modal-footer justify-content-center mb-3",children:[(0,f.jsx)("button",{type:"reset",className:"btn btn-danger me-2",children:"Reset"}),(0,f.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})})})})})})})]})]})}},79739:(e,l,i)=>{i.d(l,{A:()=>r});i(9950);var s=i(28429),t=i(42074),n=i(32003),a=i(82569),d=i(59091),o=(i(90607),i(44414));function r(e){let{title:l,header:i,subHeader:r,subHeaderOnlyView:c}=e;const{slidebarToggle:m}=(0,a.d4)(e=>e.masterslice),u=(0,s.zy)(),v=(0,a.wA)(),h=((0,s.Zp)(),null===u||void 0===u?void 0:u.pathname);let p=null===h||void 0===h?void 0:h.split("/");var x=JSON.parse(localStorage.getItem(n.Ay.AUTH_KEY));return console.log("userDetailsuserDetails",x),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"card bg-light-info shadow-none border-0 position-relative overflow-hidden make-header",children:(0,o.jsx)("div",{className:"card-body px-4 py-3",children:(0,o.jsxs)("div",{className:"row align-items-center",children:[(0,o.jsxs)("div",{className:"col-12 col-md-9 d-flex align-items-center gap-3 mb-3 mb-md-0",children:[(0,o.jsx)("button",{type:"button",className:"btn btn-light d-flex align-items-center justify-content-center p-2 shadow-sm rounded-circle",onClick:()=>{v((0,d.ST)(!m)),(()=>{const e=document.querySelector("body");if(e&&e.setAttribute("data-sidebartype",m?"mini-sidebar":"full"),window.innerWidth<=992){const e=document.getElementById("left_side_menu_id");e&&(e.style.display=m?"none":"block")}})()},children:(0,o.jsx)("i",{className:"ti ti-menu-2 fs-5 text-custom-theam"})}),(0,o.jsx)("nav",{"aria-label":"breadcrumb",className:"ms-2",children:(0,o.jsxs)("ol",{className:"breadcrumb mb-0",children:[(0,o.jsx)("li",{className:"breadcrumb-item",children:(0,o.jsx)(t.N_,{to:"/dashboard",className:"text-decoration-none",children:"Dashboard"})}),(0,o.jsx)("li",{className:"breadcrumb-item",children:(0,o.jsx)(t.N_,{to:"/".concat(null===p||void 0===p?void 0:p[1]),className:"text-decoration-none",children:i})}),r&&(0,o.jsx)("li",{className:"breadcrumb-item",children:(0,o.jsx)(t.N_,{to:h,className:"text-decoration-none",children:r})}),c&&(0,o.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:c})]})})]}),(0,o.jsxs)("div",{className:"col-12 col-md-3 d-flex justify-content-md-end justify-content-center ",children:[(0,o.jsx)("img",{src:(null===x||void 0===x?void 0:x.profile_image)||(null===n.Ay||void 0===n.Ay?void 0:n.Ay.DEFAULT_IMAGE),alt:"User Avatar",className:"rounded-circle me-2 d-none d-sm-block",style:{width:"40px",height:"40px",objectFit:"cover"}}),(0,o.jsxs)("div",{className:"d-none d-sm-block text-end",children:[(null===x||void 0===x?void 0:x.email)&&(0,o.jsx)("div",{className:"fw-semibold mb-0 ",style:{fontSize:"0.9rem"},children:null===x||void 0===x?void 0:x.email}),(null===x||void 0===x?void 0:x.role)&&(0,o.jsx)("div",{className:"fw-semibold mb-0 text-capitalize text-custom-theam",style:{fontSize:"0.9rem"},children:1==(null===x||void 0===x?void 0:x.role)?"Admin":"Sub Admin"})]})]})]})})})})}}}]);