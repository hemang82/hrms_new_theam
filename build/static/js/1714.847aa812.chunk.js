"use strict";(self.webpackChunkHRMS_Admin_Panel=self.webpackChunkHRMS_Admin_Panel||[]).push([[1714],{46004:(e,l,i)=>{i.d(l,{A:()=>b});var s=i(9950),a=i(48738),n=i.n(a),t=i(50604);function d(e){return["small","middle","large"].includes(e)}function o(e){return!!e&&("number"===typeof e&&!Number.isNaN(e))}var r=i(5741),c=i(93457);const m=s.createContext({latestIndex:0}),u=m.Provider,v=e=>{let{className:l,index:i,children:a,split:n,style:t}=e;const{latestIndex:d}=s.useContext(m);return null===a||void 0===a?null:s.createElement(s.Fragment,null,s.createElement("div",{className:l,style:t},a),i<d&&n&&s.createElement("span",{className:"".concat(l,"-split")},n))};var h=i(44655),p=function(e,l){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&l.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)l.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const x=s.forwardRef((e,l)=>{var i;const{getPrefixCls:a,direction:c,size:m,className:x,style:b,classNames:j,styles:N}=(0,r.TP)("space"),{size:g=(null!==m&&void 0!==m?m:"small"),align:f,className:y,rootClassName:E,children:A,direction:S="horizontal",prefixCls:w,split:C,style:R,wrap:O=!1,classNames:_,styles:I}=e,Y=p(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[T,P]=Array.isArray(g)?g:[g,g],M=d(P),k=d(T),D=o(P),L=o(T),z=(0,t.A)(A,{keepEmpty:!0}),F=void 0===f&&"horizontal"===S?"center":f,q=a("space",w),[H,U,G]=(0,h.A)(q),J=n()(q,x,U,"".concat(q,"-").concat(S),{["".concat(q,"-rtl")]:"rtl"===c,["".concat(q,"-align-").concat(F)]:F,["".concat(q,"-gap-row-").concat(P)]:M,["".concat(q,"-gap-col-").concat(T)]:k},y,E,G),V=n()("".concat(q,"-item"),null!==(i=null===_||void 0===_?void 0:_.item)&&void 0!==i?i:j.item);let W=0;const K=z.map((e,l)=>{var i;null!==e&&void 0!==e&&(W=l);const a=(null===e||void 0===e?void 0:e.key)||"".concat(V,"-").concat(l);return s.createElement(v,{className:V,key:a,index:l,split:C,style:null!==(i=null===I||void 0===I?void 0:I.item)&&void 0!==i?i:N.item},e)}),B=s.useMemo(()=>({latestIndex:W}),[W]);if(0===z.length)return null;const Z={};return O&&(Z.flexWrap="wrap"),!k&&L&&(Z.columnGap=T),!M&&D&&(Z.rowGap=P),H(s.createElement("div",Object.assign({ref:l,className:J,style:Object.assign(Object.assign(Object.assign({},Z),b),R)},Y),s.createElement(u,{value:B},K)))});x.Compact=c.Ay;const b=x},61714:(e,l,i)=>{i.r(l),i.d(l,{default:()=>S});var s=i(89379),a=i(9950),n=i(28429),t=i(9449),d=i(82391),o=i(52610),r=i(79739),c=i(32003),m=i(70591),u=i(82543),v=i(82569),h=i(59091),p=i(61977),x=i(60984),b=i(82137),j=i(46004),N=i(4159),g=i.n(N),f=i(90607),y=i(35254),E=i.n(y),A=(i(17687),i(44414));function S(){var e,l,i,N,y,S;const w=(0,n.Zp)(),C=(0,v.wA)(),R=(0,n.zy)();var O=null===R||void 0===R?void 0:R.state;const{projectList:{data:_}}=(0,v.d4)(e=>e.masterslice),{customerList:{data:I}}=(0,v.d4)(e=>e.masterslice),[Y,T]=(0,a.useState)(!1),[P,M]=(0,a.useState)({}),{register:k,handleSubmit:D,setValue:L,clearErrors:z,reset:F,watch:q,control:H,trigger:U,formState:{errors:G}}=(0,t.mN)({defaultValues:{dates:[{value:"",isEdit:!1}]}}),{fields:J,append:V,remove:W}=(0,t.jz)({control:H,name:"dates"});(0,a.useEffect)(()=>{0===(null===_||void 0===_?void 0:_.length)&&C((0,h.EF)({}))},[]),(0,a.useEffect)(()=>{var e;const l={emp_leave_company:null===(e=u.wz[0])||void 0===e?void 0:e.key};0===(null===I||void 0===I?void 0:I.length)&&C((0,h.hI)(l))},[]),(0,a.useEffect)(()=>{if(O&&(null===I||void 0===I?void 0:I.length)>0){var e,l,i;C((0,h.iC)(!0)),L(u.ic.PROJECT,(null===O||void 0===O?void 0:O.project_id)||null),L(u.ic.NAME,(null===O||void 0===O?void 0:O.title)||null),L(u.ic.DESCRIPTION,(null===O||void 0===O?void 0:O.description)||null),L(u.ic.PRIORITY,(null===O||void 0===O?void 0:O.priority)||null),L(u.ic.DATE,null!==O&&void 0!==O&&O.due_date?g()(null===O||void 0===O?void 0:O.due_date,"YYYY-MM-DD"):null);const a=null===_||void 0===_?void 0:_.filter(e=>e.id==(null===O||void 0===O?void 0:O.project_id));if(M((null===a||void 0===a?void 0:a.length)>0?null===(e=a[0])||void 0===e||null===(l=e.team)||void 0===l?void 0:l.split(",").map(e=>e.trim()):[]),(null===a||void 0===a?void 0:a.length)>0){var s;const e=(null===O||void 0===O||null===(s=O.assigned_users)||void 0===s?void 0:s.map(e=>String(e.user_id)))||[];L(u.ic.EMPLOYEE,e)}const n=(null===O||void 0===O?void 0:O.due_date)&&(null===O||void 0===O||null===(i=O.due_date)||void 0===i?void 0:i.map(e=>({value:g()(e,"YYYY-MM-DD").format("DD-MM-YYYY"),isEdit:!0}))),t=n.length>0?n:[{value:"",isEdit:!1}];L("dates",t),C((0,h.iC)(!1))}},[O,I]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(p.default,{isActive:Y,message:"Please Wait"}),(0,A.jsxs)("div",{className:"container-fluid mw-100",children:[(0,A.jsx)(r.A,{title:O?"Edit Assign Task":"Add Assign Task",header:"Assign Task List",subHeaderOnlyView:O?"Edit Assign Task":"Add Assign Task"}),(0,A.jsx)("div",{className:"row",children:(0,A.jsx)("div",{className:"col-12 justify-content-center",children:(0,A.jsx)("div",{className:"row justify-content-center ",children:(0,A.jsx)("form",{onSubmit:D(async e=>{try{var l,i,s,a;const t=null!==(l=null===(i=e.dates.find(e=>!1===e.isEdit))||void 0===i?void 0:i.value)&&void 0!==l?l:"";C((0,h.iC)(!0));let r={project_id:e[u.ic.PROJECT],title:e[u.ic.NAME],description:e[u.ic.DESCRIPTION],due_date:t?[(0,m.R1)(t,null===u.ow||void 0===u.ow?void 0:u.ow.DATE_FORMAT,null===u.ow||void 0===u.ow?void 0:u.ow.DATE_DASH_TIME_FORMAT)]:[],assign_to:1==(null===(s=e[u.ic.EMPLOYEE])||void 0===s?void 0:s.length)?null===(a=e[u.ic.EMPLOYEE][0])||void 0===a?void 0:a.toString():e[u.ic.EMPLOYEE],priority:e[u.ic.PRIORITY],status:""};var n;if(console.log("request",r,"newDateValue",e[u.ic.EMPLOYEE]),O)r.task_id=null===O||void 0===O||null===(n=O.task_id)||void 0===n?void 0:n.toString(),(0,o.Wo)(r).then(e=>{(null===e||void 0===e?void 0:e.code)==c.NC.SUCCESS?((0,d.k1)(null===e||void 0===e?void 0:e.message),w(null===f.R||void 0===f.R?void 0:f.R.LIST_ASSIGN_TASK),C((0,h.nj)({})),C((0,h.iC)(!1))):((0,d.uU)(e.message),C((0,h.iC)(!1)))});else(0,o.Wo)(r).then(e=>{(null===e||void 0===e?void 0:e.code)==c.NC.SUCCESS?((0,d.k1)(null===e||void 0===e?void 0:e.message),w(null===f.R||void 0===f.R?void 0:f.R.LIST_ASSIGN_TASK),C((0,h.nj)({})),C((0,h.iC)(!1))):((0,d.uU)(e.message),C((0,h.iC)(!1)))})}catch(t){(0,d.uU)("Somthing went wrong"),C((0,h.iC)(!1))}}),children:(0,A.jsx)("div",{className:"card",children:(0,A.jsx)("div",{className:"card-body",children:(0,A.jsxs)("div",{className:"row col-12 col-md-12 ",children:[(0,A.jsxs)("div",{className:"col-md-6",children:[(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("label",{htmlFor:"gender1",className:"form-label fw-semibold",children:["Select Project",(0,A.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,A.jsx)(t.xI,{name:u.ic.PROJECT,control:H,rules:{required:"Select at least one project"},render:e=>{let{field:l}=e;return(0,A.jsx)(b.A,{style:{width:"100%",height:"40px"},placeholder:"Select project",value:l.value||[],onChange:e=>{var i,s;l.onChange(e),L(u.ic.PROJECT,e);const a=null===_||void 0===_?void 0:_.filter(l=>l.id==e);M((null===a||void 0===a?void 0:a.length)>0?null===(i=a[0])||void 0===i||null===(s=i.team)||void 0===s?void 0:s.split(",").map(e=>e.trim()):[])},options:(null===_||void 0===_?void 0:_.map(e=>({label:e.name,value:e.id})))||[],optionRender:e=>(0,A.jsx)(j.A,{children:null===e||void 0===e?void 0:e.label}),disabled:!!O,className:"border rounded-1"})}}),(0,A.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(e=G[u.ic.PROJECT])||void 0===e?void 0:e.message})]}),(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("label",{htmlFor:"leave_reason",className:"form-label fw-semibold",children:["Task Description ",(0,A.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,A.jsx)("div",{className:" border rounded-1",children:(0,A.jsx)(t.xI,{name:u.ic.DESCRIPTION,control:H,rules:{required:"Enter task description"},render:e=>{let{field:l}=e;return(0,A.jsx)(E(),(0,s.A)((0,s.A)({},l),{},{theme:"snow",placeholder:"Enter task description",className:"custom-quill w-100",style:{minHeight:"200px"}}))}})}),(0,A.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(l=G[u.ic.DESCRIPTION])||void 0===l?void 0:l.message})]})]}),(0,A.jsxs)("div",{className:"col-md-6",children:[(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("label",{htmlFor:"lastname",className:"form-label fw-semibold",children:["Task Name ",(0,A.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,A.jsx)("div",{className:"input-group border rounded-1",children:(0,A.jsx)("input",(0,s.A)({type:"text",className:"form-control ps-2",placeholder:"Enter project name",autoComplete:"nope"},k(u.ic.NAME,(0,m.DX)(u.ic.NAME,"Enter project name"))))}),(0,A.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(i=G[u.ic.NAME])||void 0===i?void 0:i.message})]}),(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("label",{htmlFor:"gender1",className:"form-label fw-semibold",children:["Select Employee",(0,A.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,A.jsx)(t.xI,{name:u.ic.EMPLOYEE,control:H,rules:{required:"Select at least one employee"},render:e=>{let{field:l}=e;return(0,A.jsx)(b.A,{mode:"multiple",style:{width:"100%",height:"40px"},placeholder:"Select employee",value:l.value||[],onChange:e=>{l.onChange(e),L(u.ic.EMPLOYEE,e)},options:(null===I||void 0===I?void 0:I.filter(e=>(null===P||void 0===P?void 0:P.length)>0&&(null===P||void 0===P?void 0:P.includes(String(e.id)))).map(e=>({label:e.name,value:String(e.id)})))||[],optionRender:e=>(0,A.jsx)(j.A,{children:null===e||void 0===e?void 0:e.label}),className:"border rounded-1"})}}),(0,A.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(N=G[u.ic.EMPLOYEE])||void 0===N?void 0:N.message})]}),(0,A.jsxs)("div",{className:"2 d-flex gap-2",children:[(0,A.jsx)("div",{className:"col-12 col-md-4",children:(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("label",{htmlFor:"priority",className:"form-label fw-semibold mb-2",children:["Priority",(0,A.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,A.jsx)("div",{className:"input-group",children:(0,A.jsx)(t.xI,{name:u.ic.PRIORITY,control:H,rules:{required:"Select priority"},render:e=>{let{field:l}=e;return(0,A.jsx)(b.A,{style:{width:"100%",height:"40px"},placeholder:"Select priority",value:l.value||void 0,onChange:e=>{l.onChange(e),L(u.ic.PRIORITY,e)},options:(null===u.Rz||void 0===u.Rz?void 0:u.Rz.map(e=>({label:e.value,value:e.key})))||[],optionRender:e=>(0,A.jsx)(j.A,{children:null===e||void 0===e?void 0:e.label}),className:"border rounded-1"})}})}),(0,A.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(y=G[u.ic.PRIORITY])||void 0===y?void 0:y.message})]})}),(0,A.jsxs)("div",{className:"col-12 col-md-8 mb-4",children:[(0,A.jsxs)("div",{className:"d-flex justify-content-between mb-0 align-items-center ",children:[(0,A.jsxs)("label",{className:"form-label fw-semibold mb-2",children:["Deadline Date ",(0,A.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),!(null!==J&&void 0!==J&&J.some(e=>!1===e.isEdit))&&(0,A.jsx)("button",{type:"button",className:"btn btn-sm btn-info mb-1",onClick:()=>V({value:"",isEdit:!1}),children:"+ Add"})]}),J.map((e,l)=>(0,A.jsx)("div",{className:"d-flex align-items-center mb-2",children:(0,A.jsx)(t.xI,{name:"dates.".concat(l,".value"),control:H,rules:{required:"Select Deadline Date"},render:l=>{let{field:i}=l;return(0,A.jsx)(x.A,{className:"form-control custom-datepicker w-100",format:"DD-MM-YYYY",value:i.value?g()(i.value,"DD-MM-YYYY"):null,onChange:e=>i.onChange(e?g()(e).format("DD-MM-YYYY"):null),allowClear:!1,disabled:!0===e.isEdit,placeholder:"Select Deadline Date"})}})},e.id)),G.dates&&(0,A.jsx)("small",{className:"text-danger",children:null===(S=G.dates)||void 0===S?void 0:S.map((e,l)=>{var i;return null===e||void 0===e||null===(i=e.value)||void 0===i?void 0:i.message}).filter(Boolean).join(", ")})]})]})]}),(0,A.jsxs)("div",{className:"modal-footer justify-content-center mb-3",children:[(0,A.jsx)("button",{type:"reset",className:"btn btn-danger me-2",onClick:()=>{w(null===f.R||void 0===f.R?void 0:f.R.LIST_ASSIGN_TASK)},children:"Cancel"}),(0,A.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})})})})})})})]})]})}},79739:(e,l,i)=>{i.d(l,{A:()=>c});i(9950);var s=i(28429),a=i(42074),n=i(32003),t=i(82569),d=i(59091),o=i(90607),r=i(44414);function c(e){let{title:l,header:i,subHeader:c,subHeaderOnlyView:m}=e;const{slidebarToggle:u}=(0,t.d4)(e=>e.masterslice),v=(0,s.zy)(),h=(0,t.wA)(),p=(0,s.Zp)(),x=null===v||void 0===v?void 0:v.pathname;let b=null===x||void 0===x?void 0:x.split("/");var j=JSON.parse(localStorage.getItem(n.Ay.AUTH_KEY));return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"card bg-light-info shadow-none border-0 position-relative overflow-hidden make-header",children:(0,r.jsx)("div",{className:"card-body px-4 py-3",children:(0,r.jsxs)("div",{className:"row align-items-center",children:[(0,r.jsxs)("div",{className:"col-12 col-md-9 d-flex align-items-center gap-3 mb-3 mb-md-0",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-light d-flex align-items-center justify-content-center p-2 shadow-sm rounded-circle",onClick:()=>{h((0,d.ST)(!u)),(()=>{const e=document.querySelector("body");if(e&&e.setAttribute("data-sidebartype",u?"mini-sidebar":"full"),window.innerWidth<=992){const e=document.getElementById("left_side_menu_id");e&&(e.style.display=u?"none":"block")}})()},children:(0,r.jsx)("i",{className:"ti ti-menu-2 fs-5 text-custom-theam"})}),(0,r.jsx)("nav",{"aria-label":"breadcrumb",className:"ms-2",children:(0,r.jsxs)("ol",{className:"breadcrumb mb-0",children:[(0,r.jsx)("li",{className:"breadcrumb-item",children:(0,r.jsx)(a.N_,{to:"/dashboard",className:"text-decoration-none",children:"Dashboard"})}),(0,r.jsx)("li",{className:"breadcrumb-item",children:(0,r.jsx)(a.N_,{to:"/".concat(null===b||void 0===b?void 0:b[1]),className:"text-decoration-none",children:i})}),c&&(0,r.jsx)("li",{className:"breadcrumb-item",children:(0,r.jsx)(a.N_,{to:x,className:"text-decoration-none",children:c})}),m&&(0,r.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:m})]})})]}),(0,r.jsxs)("div",{className:"col-12 col-md-3 d-flex justify-content-md-end justify-content-center cursor-pointer ",onClick:()=>p(null===o.R||void 0===o.R?void 0:o.R.MY_PROFILE),children:[(0,r.jsx)("img",{src:(null===j||void 0===j?void 0:j.profile_image)||(null===n.Ay||void 0===n.Ay?void 0:n.Ay.DEFAULT_IMAGE),alt:"User Avatar",className:"rounded-circle me-2 d-none d-sm-block",style:{width:"40px",height:"40px",objectFit:"cover"}}),(0,r.jsxs)("div",{className:"d-none d-sm-block text-end",children:[(null===j||void 0===j?void 0:j.email)&&(0,r.jsx)("div",{className:"fw-semibold mb-0 ",style:{fontSize:"0.9rem"},children:null===j||void 0===j?void 0:j.email}),(null===j||void 0===j?void 0:j.role)&&(0,r.jsx)("div",{className:"fw-semibold mb-0 text-capitalize text-custom-theam",style:{fontSize:"0.9rem"},children:1==(null===j||void 0===j?void 0:j.role)?"Admin":"Sub Admin"})]})]})]})})})})}}}]);